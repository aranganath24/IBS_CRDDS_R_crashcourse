<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Aditya Ranganath">

<title>Analyzing, Integrating, and Visualizing Data in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="session4_files/libs/clipboard/clipboard.min.js"></script>
<script src="session4_files/libs/quarto-html/quarto.js"></script>
<script src="session4_files/libs/quarto-html/popper.min.js"></script>
<script src="session4_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="session4_files/libs/quarto-html/anchor.min.js"></script>
<link href="session4_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="session4_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="session4_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="session4_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="session4_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="session4_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="session4_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="session4_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="session4_files/libs/datatables-binding-0.33/datatables.js"></script>
<script src="session4_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="session4_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="session4_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="session4_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="session4_files/libs/dt-ext-scroller-1.13.6/css/scroller.dataTables.min.css" rel="stylesheet">
<script src="session4_files/libs/dt-ext-scroller-1.13.6/js/dataTables.scroller.min.js"></script>
<link href="session4_files/libs/dt-ext-fixedcolumns-1.13.6/css/fixedColumns.dataTables.min.css" rel="stylesheet">
<script src="session4_files/libs/dt-ext-fixedcolumns-1.13.6/js/dataTables.fixedColumns.min.js"></script>
<link href="session4_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="session4_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#preliminaries" id="toc-preliminaries" class="nav-link" data-scroll-target="#preliminaries"><span class="header-section-number">2</span> Preliminaries</a></li>
  <li><a href="#visualization-with-ggplot2" id="toc-visualization-with-ggplot2" class="nav-link" data-scroll-target="#visualization-with-ggplot2"><span class="header-section-number">3</span> Visualization with <em>ggplot2</em></a>
  <ul class="collapse">
  <li><a href="#bar-charts" id="toc-bar-charts" class="nav-link" data-scroll-target="#bar-charts"><span class="header-section-number">3.1</span> Bar Charts</a></li>
  <li><a href="#scatterplots" id="toc-scatterplots" class="nav-link" data-scroll-target="#scatterplots"><span class="header-section-number">3.2</span> Scatterplots</a></li>
  </ul></li>
  <li><a href="#elementary-data-analysis" id="toc-elementary-data-analysis" class="nav-link" data-scroll-target="#elementary-data-analysis"><span class="header-section-number">4</span> Elementary Data Analysis</a>
  <ul class="collapse">
  <li><a href="#computing-correlations" id="toc-computing-correlations" class="nav-link" data-scroll-target="#computing-correlations"><span class="header-section-number">4.1</span> Computing Correlations</a></li>
  <li><a href="#basic-regression-models" id="toc-basic-regression-models" class="nav-link" data-scroll-target="#basic-regression-models"><span class="header-section-number">4.2</span> Basic Regression Models</a></li>
  </ul></li>
  <li><a href="#integrating-datasets" id="toc-integrating-datasets" class="nav-link" data-scroll-target="#integrating-datasets"><span class="header-section-number">5</span> Integrating Datasets</a>
  <ul class="collapse">
  <li><a href="#data-transfer-part-2-reading-in-multiple-datasets" id="toc-data-transfer-part-2-reading-in-multiple-datasets" class="nav-link" data-scroll-target="#data-transfer-part-2-reading-in-multiple-datasets"><span class="header-section-number">5.1</span> Data Transfer Part 2: Reading in Multiple Datasets</a></li>
  <li><a href="#joining-data" id="toc-joining-data" class="nav-link" data-scroll-target="#joining-data"><span class="header-section-number">5.2</span> Joining Data</a></li>
  <li><a href="#appending-data" id="toc-appending-data" class="nav-link" data-scroll-target="#appending-data"><span class="header-section-number">5.3</span> Appending Data</a></li>
  <li><a href="#reshaping-data" id="toc-reshaping-data" class="nav-link" data-scroll-target="#reshaping-data"><span class="header-section-number">5.4</span> Reshaping Data</a></li>
  <li><a href="#automating-data-processing-with-functions" id="toc-automating-data-processing-with-functions" class="nav-link" data-scroll-target="#automating-data-processing-with-functions"><span class="header-section-number">5.5</span> Automating Data Processing with Functions</a></li>
  </ul></li>
  <li><a href="#data-transfer-part-3-exporting-data" id="toc-data-transfer-part-3-exporting-data" class="nav-link" data-scroll-target="#data-transfer-part-3-exporting-data"><span class="header-section-number">6</span> Data Transfer Part 3: Exporting Data</a>
  <ul class="collapse">
  <li><a href="#exporting-a-data-frame" id="toc-exporting-a-data-frame" class="nav-link" data-scroll-target="#exporting-a-data-frame"><span class="header-section-number">6.1</span> Exporting a Data Frame</a></li>
  <li><a href="#exporting-a-summary-statistics-table" id="toc-exporting-a-summary-statistics-table" class="nav-link" data-scroll-target="#exporting-a-summary-statistics-table"><span class="header-section-number">6.2</span> Exporting a Summary Statistics Table</a></li>
  <li><a href="#exporting-regression-tables" id="toc-exporting-regression-tables" class="nav-link" data-scroll-target="#exporting-regression-tables"><span class="header-section-number">6.3</span> Exporting Regression Tables</a></li>
  <li><a href="#iteratively-exporting-multiple-data-frames" id="toc-iteratively-exporting-multiple-data-frames" class="nav-link" data-scroll-target="#iteratively-exporting-multiple-data-frames"><span class="header-section-number">6.4</span> Iteratively Exporting Multiple Data Frames</a></li>
  <li><a href="#exporting-visualizations" id="toc-exporting-visualizations" class="nav-link" data-scroll-target="#exporting-visualizations"><span class="header-section-number">6.5</span> Exporting Visualizations</a></li>
  </ul></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises"><span class="header-section-number">7</span> Exercises</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Analyzing, Integrating, and Visualizing Data in R</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Aditya Ranganath </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>In this session we’ll cover the following topics:</p>
<ul>
<li><p>Basic analysis (correlations and regressions)</p></li>
<li><p>Exploratory visualization with <em>ggplot2</em></p></li>
<li><p>Integrating and working with multiple datasets (i.e.&nbsp;joining, appending, reshaping, iteratively processing)</p></li>
<li><p>Exporting data out of R</p></li>
</ul>
<p>We will continue working with the Persson-Tabellini dataset. We will also work with some World Bank datasets that you should have downloaded yesterday. Please load all of the libraries you loaded yesterday:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fastDummies)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(summarytools)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stargazer)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggeffects)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="preliminaries" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Preliminaries</h1>
<p>Please go ahead and set your working directory, read in the Persson-Tabellini dataset and assign it to an object named <code>pt</code>, and then make a copy that you can use in this session:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reads in PT data into R</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>pt<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"data/pt/persson_tabellini_workshop.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 85 Columns: 75
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (2): country, continent
dbl (73): oecd, pind, pindo, ctrycd, col_uk, t_indep, col_uka, col_espa, col...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># makes dataset copy</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>pt_copy<span class="ot">&lt;-</span>pt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="visualization-with-ggplot2" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Visualization with <em>ggplot2</em></h1>
<p>In this section, we’ll discuss how to use <em>ggplot2</em> to visualize our data. <em>ggplot2</em> is the <em>tidyverse</em>’s visualization package, and is rooted in a framework known as the “grammar of graphics” (in fact, the “gg” in <em>ggplot2</em> stands for “grammar of graphics”). The basic idea behind the grammar of graphics is that we create visualizations by layering different elements on top of each other. For example, the foundational layer is the data used to create the plot. Another element layered on top of the data is a visualization’s aesthetic (often referred to as “aes”), which specifies how the underlying data is mapped onto the visual properties of the visualization. For example, features like color, size, and shape can be used to distinguish different groups or points in the data, and are considered part of the aesthetic layer. On top of the data and aesthetics, we can layer geometries, which specify how the data is represented in terms of visual geometries (i.e.&nbsp;points, lines, bars etc.). Other elements include themes, which refer to properties of the plot that are not directly tied to the plot (such as background color, text positioning, and font sizes), but which can meaningfully shape the visualization’s appearance and a viewer’s ability to engage with it. The syntax of <em>ggplot2</em> corresponds to the concept of the grammar of graphics; different functions correspond to different “layers” in the grammar of graphics, and are layered on top of each other with a “+” sign, building out the visualization element by element.</p>
<p><em>ggplot2</em> is a remarkable package, and builds on R’s prior strengths as a data visualization platform. It’s possible to make beautiful visualizations using <em>ggplot2</em>, but our focus here will be on getting acquainted with the basic syntax of the package, and making some quick exploratory visualizations based on data from the <code>pt_copy</code> dataset.</p>
<section id="bar-charts" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="bar-charts"><span class="header-section-number">3.1</span> Bar Charts</h2>
<p>Let’s start by making some simple bar charts for the African countries in <code>pt_copy</code>. Let’s say we want to make a bar chart that displays variation in the “cgexp” variable (central government expenditure as a share of GDP) for African countries. We’ll begin by extracting the Africa observations from <code>pt_copy</code> using the <code>filter()</code> function, and removing any “NA” observations for this variable from the dataset using the <code>drop_na()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filters Africa observations</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>pt_africa<span class="ot">&lt;-</span>pt_copy <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">filter</span>(continent<span class="sc">==</span><span class="st">"africa"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">drop_na</span>(cgexp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, let’s make a basic bar chart of the “cgexp” data from <code>pt_africa</code>, and assign it to an object named <code>cgexp_africa</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates a bar chart of the "cgexp" variable (central government expenditure as a share of GDP) for the Africa observations and assigns the plot to an object named "cgexp_africa"</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>cgexp_africa<span class="ot">&lt;-</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(pt_africa)<span class="sc">+</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x=</span>country, <span class="at">y=</span>cgexp))<span class="sc">+</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title=</span><span class="st">"Central Govt Expenditure as Pct of GDP for Select African Countries (1990-1998 Average)"</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x=</span><span class="st">"Country Name"</span>, </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y=</span><span class="st">"CGEXP"</span>)<span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s unpack the code above:</p>
<ul>
<li>The expression <code>ggplot(pt_africa)</code> specifies that we want to initialize <em>ggplot</em>, and declares the dataset containing the data we want to map (“pt_africa”)</li>
<li><code>geom_col()</code> indicates that we want to make a bar chart. If you wanted to make a different type of chart, this function would be different. Within the <code>geom_col()</code> function, we indicate our desired aesthetic mapping <code>aes()</code>; an aesthetic mapping indicates how we would like variables in the datasets to be represented on the chosen visualization. Here, the expression <code>x=country, y=cgexp</code> simply indicates that we want countries to be represented on the x-axis of the chart, and the “cgexp” variable to be represented on the y-axis.</li>
<li>The arguments to the <code>labs()</code> function (short for “labels”) specify a desired title for the visualization, and x-axis and y-axis labels.</li>
<li>The arguments to the <code>theme()</code> function specify a desired position for the plot title, and a desired format for the x-axis labels.</li>
</ul>
<p>Let’s see what <code>cgexp_africa</code> looks like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of cgexp_africa</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>cgexp_africa</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This is a nice start, but it may look a bit cleaner if we arrayed the chart in ascending order with respect to the cgexp variable. To do so, we can slightly change our aesthetic mapping to look like this: <code>aes(x=reorder(country, cgexp), y=cgexp))</code>. This indicates that we’d still like the “cgexp” variable on the y-axis, and countries on the x-axis; however, we’d also like to order countries in ascending order with respect to the “cgexp” variable. We’ll also lower the X-axis label a bit, to make it less crowded; we can do so with <code>axis.title.x=element_text(margin=margin(t=20)</code>. We’ll assign this modified chart to a new object named <code>cgexp_africa_ascending</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates a bar chart of the "cgexp" variable (central government expenditure as a share of GDP) for the Africa observations; countries are on the x axis and arrayed in ascending order with respect to the cgexp variable, which is on the y-axis; plot is assigned to an object named "cgexp_africa_ascending"</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>cgexp_africa_ascending<span class="ot">&lt;-</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(pt_africa)<span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(country, cgexp), <span class="at">y=</span>cgexp))<span class="sc">+</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title=</span><span class="st">"Central Govt Expenditure as Pct of GDP for Select African Countries (1990-1998 Average)"</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x=</span><span class="st">"Country Name"</span>, </span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y=</span><span class="st">"CGEXP"</span>)<span class="sc">+</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>),</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x=</span><span class="fu">element_text</span>(<span class="at">margin=</span><span class="fu">margin</span>(<span class="at">t=</span><span class="dv">20</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>All other apsects of the code are the same as before. Let’s see what the modified chart looks like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "cgexp_africa_ascending"</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>cgexp_africa_ascending</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>If, instead of arranging the countries in ascending order with respect to the “cgexp” variable, we want to arrange them in descending order, we can simply put a “-” before “cgexp” within the aesthetic mapping; we’ll assign the modified chart to a new object named <code>cgexp_africa_descending</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates a bar chart of the "cgexp" variable (central government expenditure as a share of GDP) for the Africa observations; countries are on the x axis and arrayed in descending order with respect to the cgexp variable, which is on the y-axis; plot is assigned to an object named "cgexp_africa_descending"</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>cgexp_africa_descending<span class="ot">&lt;-</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(pt_africa)<span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(country, <span class="sc">-</span>cgexp), <span class="at">y=</span>cgexp))<span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title=</span><span class="st">"Central Govt Expenditure as Pct of GDP for Select African Countries (1990-1998 Average)"</span>,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x=</span><span class="st">"Country Name"</span>, </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y=</span><span class="st">"CGEXP"</span>)<span class="sc">+</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="fl">0.5</span>),</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>),</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x=</span><span class="fu">element_text</span>(<span class="at">margin=</span><span class="fu">margin</span>(<span class="at">t=</span><span class="dv">20</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s see how the <code>cgexp_africa_descending</code> plot now looks:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of "cgexp_africa_descending"</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>cgexp_africa_descending</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Sometimes, you may wish to invert the axes of your charts, which you can do using the <code>coord_flip()</code> function. The code below takes the <code>cgexp_africa_ascending</code> chart we created above, inverts the axes using <code>coord_flip()</code>, and assigns the result to a new object named <code>cgexp_africa_ascending_inverted</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creates a sideways bar chart using the "coord_flip" function and assigns it to a new object named "cgexp_africa_ascending_inverted"  </span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>cgexp_africa_ascending_inverted<span class="ot">&lt;-</span>cgexp_africa_ascending<span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>                                    <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "cgexp_africa_ascending_inverted"</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>cgexp_africa_ascending_inverted</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>When we use <code>coord_flip()</code> in <em>ggplot2</em> it flips the axes (i.e.&nbsp;the x-axis becomes the y-axis and vice versa). As a result, the (now) x-axis labels in <code>cgexp_africa_ascending_inverted</code> are difficult to read, and need to be adjusted. We can do so by modifying the “axis.text.x” argument within the <code>theme()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fixes x axis labels</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>cgexp_africa_ascending_inverted<span class="ot">&lt;-</span>cgexp_africa_ascending_inverted<span class="sc">+</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>                                    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s see what the plot looks like now:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of "cgexp_africa_ascending_inverted"</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>cgexp_africa_ascending_inverted</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="scatterplots" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="scatterplots"><span class="header-section-number">3.2</span> Scatterplots</h2>
<p>The syntax to make a scatterplot is fairly similar to the syntax used to create a bar chart; the main difference is that instead of using the <code>geom_col()</code> function to indicate that we want a bar chart, we use the <code>geom_point()</code> function to indicate that we want a scatterplot. We will be creating scatterplots of the “cgexp” and “trade” variables, so we’ll start by cleaning <code>pt_copy</code> to prepare it for visualization. In particular, we’ll remove NA values for these two variables, and assign this version of the dataset to an object named <code>pt_copy_cleaned</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removes rows with NA values for "cgexp" and "trade; assigns cleaned dataset to object named "pt_copy_cleaned"</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>pt_copy_cleaned<span class="ot">&lt;-</span>pt_copy <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>(cgexp, trade)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we’re ready to make our scatterplot. The code below generates a scatterplot of the “cgexp” variable (on the x axis) and the “trade” variable (on the y-axis) for all observations in the <code>pt_copy</code> dataset, and assigns it to a new object named <code>scatter_cgexp_trade</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates scatterplot with "cgexp" variable on x-axis and "trade" variiable on y-axis and assigns to object named "scatter_cgexp_trade"</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>scatter_cgexp_trade<span class="ot">&lt;-</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(pt_copy_cleaned)<span class="sc">+</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>cgexp, <span class="at">y=</span>trade))<span class="sc">+</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Trade Share of GDP </span><span class="sc">\n</span><span class="st">as a function of</span><span class="sc">\n</span><span class="st"> Central Govt Expenditure (1990-1998 Average) "</span>, </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">"Central Government Expenditure (Pct of GDP)"</span>, <span class="at">y=</span><span class="st">"Overall Trade (Pct of GDP)"</span>)<span class="sc">+</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="fl">0.5</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s see what <code>scatter_cgexp_trade</code> looks like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of "scatter_cgexp_trade"</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>scatter_cgexp_trade</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Sometimes, we may wish to distinguish between different groups in a scatterplot. One way to do that is to assign different colors to different groups of interest. For example, if we wanted to distinguish continents in the scatterplot, we could specify <code>color=continent</code> in the aesthetic mapping. The code below does so, and assigns the result to a new object named <code>scatter_cgexp_trade_grouped</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates scatterplot with "cgexp" variable on x-axis and "trade" variable on y-axis, and uses different color points for different continents; plot is assigned to object named "scatter_cgexp_trade_grouped"</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>scatter_cgexp_trade_grouped<span class="ot">&lt;-</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(pt_copy_cleaned)<span class="sc">+</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>cgexp, <span class="at">y=</span>trade, <span class="at">color=</span>continent))<span class="sc">+</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Trade Share of GDP </span><span class="sc">\n</span><span class="st">as a function of</span><span class="sc">\n</span><span class="st"> Central Govt Expenditure (1990-1998 Average) "</span>, </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">"Central Government Expenditure (Pct of GDP)"</span>, <span class="at">y=</span><span class="st">"Overall Trade (Pct of GDP)"</span>)<span class="sc">+</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="fl">0.5</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s see what <code>scatter_cgexp_trade_grouped</code> looks like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of "scatter_cgexp_trade_grouped"</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>scatter_cgexp_trade_grouped</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>An alternative way of parsing categories is to use facets, which create separate visualizations for each of the different categories in a dataset. Below, for example, we create separate scatterplots for each continent (this is specified by the final line in the code, <code>facet_wrap(~continent, nrow=2))</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates continent-level subplots for scatterplot, using facets; assigns plot to new object named "scatter_cgexp_trade_facets"</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>scatter_cgexp_trade_facets<span class="ot">&lt;-</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(pt_copy_cleaned) <span class="sc">+</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> cgexp, <span class="at">y =</span> trade)) <span class="sc">+</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> continent, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s print the contents of <code>scatter_cgexp_trade_facets</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "scatter_cgexp_trade_facets"</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>scatter_cgexp_trade_facets</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Finally, it’s important to note that it’s possible to layer different geometries over each other. For example, the code below plots a scatterplot for the <code>pt_copy</code> dataset with the “cgexp” variable on the x axis and the trade variable on the y-axis, but also plots a line of best fit on top of the scatterplot with <code>geom_smooth(aes(x=cgexp, y=trade), method="lm")</code>; we’ll assign the resulting plot to <code>scatter_cgexp_trade_line</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates scatterplot with "cgexp" variable on x-axis and "trade" variiable on y-axis, adds line of best fit; plot assigned to object named "scatter_cgexp_trade_line"</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>scatter_cgexp_trade_line<span class="ot">&lt;-</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(pt_copy_cleaned)<span class="sc">+</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>cgexp, <span class="at">y=</span>trade))<span class="sc">+</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x=</span>cgexp, <span class="at">y=</span>trade), <span class="at">method=</span><span class="st">"lm"</span>)<span class="sc">+</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Trade Share of GDP </span><span class="sc">\n</span><span class="st">as a function of</span><span class="sc">\n</span><span class="st"> Central Govt Expenditure (1990-1998 Average) "</span>, </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">"Central Government Expenditure (Pct of GDP)"</span>, <span class="at">y=</span><span class="st">"Overall Trade (Pct of GDP)"</span>)<span class="sc">+</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">hjust=</span><span class="fl">0.5</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s see what it looks like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prints contents of "scatter_cgexp_trade_line"</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>scatter_cgexp_trade_line</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="elementary-data-analysis" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Elementary Data Analysis</h1>
<p>In this section, we’ll review some functions that can implement some basic data analysis tasks. Our focus is not on the methodologies themselves, or deeper questions about drawing inferences from data and the appropriateness of various models in different contexts. Our goal is simply to provide you with a tour of how to implement some standard statistical procedures in R; if you continue to use R, you will quickly come to appreciate the enormous resources if offers for statistical work. Here, we only have time to barely scratch the surface.</p>
<section id="computing-correlations" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="computing-correlations"><span class="header-section-number">4.1</span> Computing Correlations</h2>
<section id="computing-a-correlation-coefficient" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="computing-a-correlation-coefficient"><span class="header-section-number">4.1.1</span> Computing a correlation coefficient</h3>
<p>We can compute a basic correlation coefficient using the <code>core.test()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># computes correlation coefficient between "trade" and "cgexp" variables and assigns the result to a new object named "trade_cgexp_cc"</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>trade_cgexp_cc<span class="ot">&lt;-</span><span class="fu">cor.test</span>(pt_copy<span class="sc">$</span>trade, pt_copy<span class="sc">$</span>cgexp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints results of "trade_cgexp_cc"</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>trade_cgexp_cc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  pt_copy$trade and pt_copy$cgexp
t = 1.8131, df = 80, p-value = 0.07356
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.01915884  0.39850057
sample estimates:
      cor 
0.1986743 </code></pre>
</div>
</div>
<p>We can format this more cleanly using the <code>tidy()</code> function from the <em>broom</em> package (part of the <em>tidyverse</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cleans up formatting of "trade_cgexp_cc"</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(trade_cgexp_cc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 8
  estimate statistic p.value parameter conf.low conf.high method     alternative
     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;int&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      
1    0.199      1.81  0.0736        80  -0.0192     0.399 Pearson's… two.sided  </code></pre>
</div>
</div>
<p>We can assign this neater version of the model output to a new object named <code>trade_cgexp_cc_clean</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># assigns well-formatted model output to "trade_cgexp_cc_clean"</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>trade_cgexp_cc_clean<span class="ot">&lt;-</span>broom<span class="sc">::</span><span class="fu">tidy</span>(trade_cgexp_cc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="generating-a-correlation-matrix" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="generating-a-correlation-matrix"><span class="header-section-number">4.1.2</span> Generating a correlation matrix</h3>
<p>To generate a correlation matrix, we can use the <code>cor()</code> function. First, we’ll select the variables we want to examine:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generating a correlation matrix</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Extracts variables for which we want a correlation matrix</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>desired_variables<span class="ot">&lt;-</span>pt_copy <span class="sc">%&gt;%</span> <span class="fu">select</span>(trade, cgexp, cgrev, catho80)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we can pass <code>desired_variables</code> as an argument to the <code>cor()</code> function, and assign it to a new object named <code>cor_matrix</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates correlation matrix from "desired_variables" object and assigns to object named "cor_matrix"</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>cor_matrix<span class="ot">&lt;-</span><span class="fu">cor</span>(desired_variables, <span class="at">use=</span><span class="st">"complete.obs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of "cor_matrix"</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>cor_matrix</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              trade      cgexp      cgrev     catho80
trade    1.00000000  0.1792884  0.3458730 -0.08442666
cgexp    0.17928838  1.0000000  0.9094998 -0.07010910
cgrev    0.34587298  0.9094998  1.0000000 -0.05923500
catho80 -0.08442666 -0.0701091 -0.0592350  1.00000000</code></pre>
</div>
</div>
</section>
</section>
<section id="basic-regression-models" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="basic-regression-models"><span class="header-section-number">4.2</span> Basic Regression Models</h2>
<section id="bivariate-regression" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="bivariate-regression"><span class="header-section-number">4.2.1</span> Bivariate Regression</h3>
<p>We can run a linear regression model in R using the <code>lm()</code> function, where the first argument is the dependent variable, and the independent variables appear after the <code>~</code> that follows the dependent variable. We must also specify what data is being modeled using the <code>data</code> argument. Below, we’ll calculate a simple bivariate regression using <code>pt_copy</code>, where the independent variable is “cgexp” (central goverment expenditure), and the independent variable is “trade” (as a share of GDP). We’ll assign the output of the model to a new object named <code>regression1:</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># implements bivariate regression with "gexp" as DV and "trade" as IV; assigned to "regression1" object</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>regression1<span class="ot">&lt;-</span><span class="fu">lm</span>(cgexp<span class="sc">~</span>trade, <span class="at">data=</span>pt_copy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can view the regression output by passing the object to the <code>summary</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints output of "regression1"</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regression1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = cgexp ~ trade, data = pt_copy)

Residuals:
    Min      1Q  Median      3Q     Max 
-21.851  -8.559  -1.207   7.243  21.471 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 25.40556    2.20151  11.540   &lt;2e-16 ***
trade        0.04347    0.02398   1.813   0.0736 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 10.34 on 80 degrees of freedom
  (3 observations deleted due to missingness)
Multiple R-squared:  0.03947,   Adjusted R-squared:  0.02746 
F-statistic: 3.287 on 1 and 80 DF,  p-value: 0.07356</code></pre>
</div>
</div>
</section>
<section id="multivariate-regression" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="multivariate-regression"><span class="header-section-number">4.2.2</span> Multivariate Regression</h3>
<p>The process for multivariate regression is much the same as for bivariate regression; we simply add the additional independent variables after with a “+” sign. Below, we compute a regression with additional covariates and assign it to the object named <code>regression2</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Implements regression with "gexp" as DV, and assigns to object named "regression1"</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>regression2<span class="ot">&lt;-</span><span class="fu">lm</span>(cgexp<span class="sc">~</span>gastil<span class="sc">+</span>lyp<span class="sc">+</span>trade<span class="sc">+</span>prop1564<span class="sc">+</span>prop65<span class="sc">+</span>federal<span class="sc">+</span>oecd, <span class="at">data=</span>pt_copy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we can print out model output using the <code>summary</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints output of "regression2"</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regression2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = cgexp ~ gastil + lyp + trade + prop1564 + prop65 + 
    federal + oecd, data = pt_copy)

Residuals:
     Min       1Q   Median       3Q      Max 
-12.9861  -4.6981  -0.5521   4.4482  16.1124 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 52.17290   16.08572   3.243  0.00179 ** 
gastil      -2.15202    1.10609  -1.946  0.05561 .  
lyp         -2.04441    2.00721  -1.019  0.31184    
trade        0.04978    0.01924   2.587  0.01170 *  
prop1564    -0.28482    0.26686  -1.067  0.28939    
prop65       1.58627    0.33548   4.728 1.09e-05 ***
federal     -4.58101    2.38015  -1.925  0.05822 .  
oecd         0.96969    2.97171   0.326  0.74514    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 7.064 on 72 degrees of freedom
  (5 observations deleted due to missingness)
Multiple R-squared:  0.5865,    Adjusted R-squared:  0.5463 
F-statistic: 14.59 on 7 and 72 DF,  p-value: 1.137e-11</code></pre>
</div>
</div>
</section>
<section id="categorical-variables-in-a-regression-model" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="categorical-variables-in-a-regression-model"><span class="header-section-number">4.2.3</span> Categorical Variables in a Regression Model</h3>
<p>If you want to add categorical variables to a regression model, you can directly include variables that are of the class “character” without running into any issues. Under the hood, R will convert those character variables into dichotomous variables, and calculate the regression coefficients and standard errors accordingly. To see this, let’s try adding the “continent” variable to <code>regression2 above.</code> First, we’ll confirm that the “continent” variable is of the character class:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints class of "continent" variable</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(pt_copy<span class="sc">$</span>continent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>Now, we’ll put it into the regression model from <code>regression2</code>, and assign the output to a new object named <code>regression3</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># adds "continent" categorical variable to previously run "regression2" model; output of model assigned to object named "regression3"</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>regression3<span class="ot">&lt;-</span><span class="fu">lm</span>(cgexp<span class="sc">~</span>gastil<span class="sc">+</span>lyp<span class="sc">+</span>trade<span class="sc">+</span>prop1564<span class="sc">+</span>prop65<span class="sc">+</span>federal<span class="sc">+</span>oecd<span class="sc">+</span>continent, <span class="at">data=</span>pt_copy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s now look at the model output:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># opens model output of "regression3"</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regression3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = cgexp ~ gastil + lyp + trade + prop1564 + prop65 + 
    federal + oecd + continent, data = pt_copy)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.0866  -4.7622  -0.6861   4.0823  16.9440 

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)   
(Intercept)    43.35764   16.04158   2.703  0.00865 **
gastil         -2.22031    1.09801  -2.022  0.04704 * 
lyp             0.19365    2.02437   0.096  0.92407   
trade           0.03516    0.01901   1.849  0.06868 . 
prop1564       -0.28713    0.26498  -1.084  0.28231   
prop65          0.89189    0.43407   2.055  0.04369 * 
federal        -4.41605    2.26113  -1.953  0.05487 . 
oecd           -2.58250    3.04127  -0.849  0.39873   
continentasiae -5.22677    3.19253  -1.637  0.10614   
continentlaam  -6.96177    2.93306  -2.374  0.02041 * 
continentother  2.17697    4.39537   0.495  0.62197   
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.707 on 69 degrees of freedom
  (5 observations deleted due to missingness)
Multiple R-squared:  0.6428,    Adjusted R-squared:  0.591 
F-statistic: 12.42 on 10 and 69 DF,  p-value: 5.343e-12</code></pre>
</div>
</div>
<p>Note that “africa” is the excluded category that serves as the reference against which the effects of the other categories are interpreted. If we are okay with accepting the default excluded category (which is the first category by alphabetical order, hence “africa” as the excluded category) running the regression with a character variable is perfectly fine. However, if we want to change the reference category, we’ll have to either use a factor variable or create and include dummy variables in our regression. In R, a factor is a data type that’s specifically designed for categorical variables; factors consider each separate category within a categorical variable as a distinct “level”, which allows them to be treated as dummy variables in regression models. Indeed, when we include a categorical variable of the “character” class, R converts that variable into a factor under the hood before including it in the regression, with the “levels” being treated as dummy variables, and the excluded level being the category that is first with respect to alphabetical order. If we want to change the excluded level, we have to get under the hood and “relevel” the factor, so that the desired excluded category is first in the factor order. To do so, we’ll first change the continent variable from a “character” variable to a “factor” variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set "continent" variable as factor</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>pt_copy<span class="sc">$</span>continent<span class="ot">&lt;-</span><span class="fu">as.factor</span>(pt_copy<span class="sc">$</span>continent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, let’s check the levels of the “continent” variable using the <code>levels()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check levels of "continent" factor variable</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(pt_copy<span class="sc">$</span>continent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "africa" "asiae"  "laam"   "other" </code></pre>
</div>
</div>
<p>As expected, the first level of the “continent” factor is “africa”, which means that it’s the excluded category in a regression model by default. To change this, and make “other” the first level (and hence the excluded category), we can use the <code>relevel()</code> function and explicitly set “other” as the reference category:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Relevels "continent" factor variable to set "other" as reference category</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>pt_copy<span class="sc">$</span>continent<span class="ot">&lt;-</span><span class="fu">relevel</span>(pt_copy<span class="sc">$</span>continent, <span class="at">ref=</span><span class="st">"other"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s now check the levels of the “continent” variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check levels of "continent" factor variable</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(pt_copy<span class="sc">$</span>continent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "other"  "africa" "asiae"  "laam"  </code></pre>
</div>
</div>
<p>This confirms that the variable has been releveled, and “other” is now the reference category. Let’s go ahead and run the regression with “continent” as a releveled factor variable with “other” as the excluded category:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># runs regression model with releveled continent variable, "other" is excluded category</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>regression4<span class="ot">&lt;-</span><span class="fu">lm</span>(cgexp<span class="sc">~</span>gastil<span class="sc">+</span>lyp<span class="sc">+</span>trade<span class="sc">+</span>prop1564<span class="sc">+</span>prop65<span class="sc">+</span>federal<span class="sc">+</span>oecd<span class="sc">+</span>continent, <span class="at">data=</span>pt_copy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints model output of "regression4</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regression4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = cgexp ~ gastil + lyp + trade + prop1564 + prop65 + 
    federal + oecd + continent, data = pt_copy)

Residuals:
     Min       1Q   Median       3Q      Max 
-14.0866  -4.7622  -0.6861   4.0823  16.9440 

Coefficients:
                Estimate Std. Error t value Pr(&gt;|t|)   
(Intercept)     45.53461   17.01654   2.676   0.0093 **
gastil          -2.22031    1.09801  -2.022   0.0470 * 
lyp              0.19365    2.02437   0.096   0.9241   
trade            0.03516    0.01901   1.849   0.0687 . 
prop1564        -0.28713    0.26498  -1.084   0.2823   
prop65           0.89189    0.43407   2.055   0.0437 * 
federal         -4.41605    2.26113  -1.953   0.0549 . 
oecd            -2.58250    3.04127  -0.849   0.3987   
continentafrica -2.17697    4.39537  -0.495   0.6220   
continentasiae  -7.40374    4.06514  -1.821   0.0729 . 
continentlaam   -9.13874    3.66981  -2.490   0.0152 * 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.707 on 69 degrees of freedom
  (5 observations deleted due to missingness)
Multiple R-squared:  0.6428,    Adjusted R-squared:  0.591 
F-statistic: 12.42 on 10 and 69 DF,  p-value: 5.343e-12</code></pre>
</div>
</div>
<p>Note that “other” is now the excluded category in the model.</p>
<p>If we want full control over the excluded/reference category when including categorical variables, another option is to simply create dichotomous/dummy variables based on the categorical variable, and explicitly decide which dichotomous variable to exclude as the reference category. To make these dummy variables, we can (as we have learned), use the <code>dummy_cols()</code> function from the <em>fastDummies</em> package. In this case, we’ll make dummy variables based on the “continent” variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use "continent" field to make continent dummy variables</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>pt_copy<span class="ot">&lt;-</span>pt_copy <span class="sc">%&gt;%</span> <span class="fu">dummy_cols</span>(<span class="st">"continent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we’ll include all of the dummy variables except “other” (the reference category) and run the regression:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># includes dummy variables in regression with "other" as the excluded category; model output assigned to object named "regression5"</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>regression5<span class="ot">&lt;-</span><span class="fu">lm</span>(<span class="fu">lm</span>(cgexp<span class="sc">~</span>gastil<span class="sc">+</span>lyp<span class="sc">+</span>trade<span class="sc">+</span>prop1564<span class="sc">+</span>prop65<span class="sc">+</span>federal<span class="sc">+</span>oecd<span class="sc">+</span>continent_africa<span class="sc">+</span>continent_asiae<span class="sc">+</span>continent_laam, <span class="at">data=</span>pt_copy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, let’s go ahead and print the model output:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints model output for "regression4"</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regression5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lm(cgexp ~ gastil + lyp + trade + prop1564 + prop65 + 
    federal + oecd + continent_africa + continent_asiae + continent_laam, 
    data = pt_copy))

Residuals:
     Min       1Q   Median       3Q      Max 
-14.0866  -4.7622  -0.6861   4.0823  16.9440 

Coefficients:
                 Estimate Std. Error t value Pr(&gt;|t|)   
(Intercept)      45.53461   17.01654   2.676   0.0093 **
gastil           -2.22031    1.09801  -2.022   0.0470 * 
lyp               0.19365    2.02437   0.096   0.9241   
trade             0.03516    0.01901   1.849   0.0687 . 
prop1564         -0.28713    0.26498  -1.084   0.2823   
prop65            0.89189    0.43407   2.055   0.0437 * 
federal          -4.41605    2.26113  -1.953   0.0549 . 
oecd             -2.58250    3.04127  -0.849   0.3987   
continent_africa -2.17697    4.39537  -0.495   0.6220   
continent_asiae  -7.40374    4.06514  -1.821   0.0729 . 
continent_laam   -9.13874    3.66981  -2.490   0.0152 * 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.707 on 69 degrees of freedom
  (5 observations deleted due to missingness)
Multiple R-squared:  0.6428,    Adjusted R-squared:  0.591 
F-statistic: 12.42 on 10 and 69 DF,  p-value: 5.343e-12</code></pre>
</div>
</div>
<p>Note that the model outputs are the same as for regression4, which is what we’d expect, since factor variables are dummy variables under the hood.</p>
</section>
<section id="interaction-terms" class="level3" data-number="4.2.4">
<h3 data-number="4.2.4" class="anchored" data-anchor-id="interaction-terms"><span class="header-section-number">4.2.4</span> Interaction Terms</h3>
<p>It is often useful to include interaction terms in our regression models. Interaction terms allow us to explore situation where the effect of one variable in the regression depends on another variable in the model (and vice-versa). In R, interaction terms can be defined with “*” between the two components of the interaction. When an interaction term is included in a regression model, there’s no need to to explicitly also include the individual components in the model; when an interaction is added, the individual components will also be incorporated into the model. Let’s explore a simple regression model with an interaction term between “trade” and “federal”; the independent variable remains “cgexp”. Below, we’ll run the model, and assign the output to an object named <code>trade_federal_interaction</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># run regression with interaction term between "trade" and "federal"</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>trade_federal_interaction<span class="ot">&lt;-</span><span class="fu">lm</span>(cgexp<span class="sc">~</span>trade<span class="sc">*</span>federal, <span class="at">data=</span>pt_copy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s check the model output:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "trade_federal_interaction" regression table</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(trade_federal_interaction)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = cgexp ~ trade * federal, data = pt_copy)

Residuals:
     Min       1Q   Median       3Q      Max 
-20.0774  -8.1325   0.5782   7.7004  21.0072 

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   26.708234   2.517787  10.608   &lt;2e-16 ***
trade          0.034512   0.026410   1.307    0.195    
federal       -4.695595   5.512752  -0.852    0.397    
trade:federal  0.009965   0.076991   0.129    0.897    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 10.42 on 77 degrees of freedom
  (4 observations deleted due to missingness)
Multiple R-squared:  0.05761,   Adjusted R-squared:  0.02089 
F-statistic: 1.569 on 3 and 77 DF,  p-value: 0.2037</code></pre>
</div>
</div>
<p>Interpreting regression tables when there’s an interaction is of course tricky, since the coefficients on the individual variables that are part of the interaction term can no longer be interpreted in isolation. They can only be interpreted in conjunction with the other component of the interaction. Let’s say, for example, that we’re interested in the impact of federalism on central government expenditure (“cgexp”). Given the interaction term, we cannot simply infer that the central government expenditure as a share of GDP is 4.69 points lower for federal countries, on average, than non-federal countries. The coefficient on “federal” tells us that central government expenditure as a share of GDP is on average 4.69 points lower for federal countries when trade as a share of GDP is 0, but this information is of debatable value (since trade is unlikely to be in that range for any realistic scenario).</p>
<p>Rather than try to interpret the effect of federalism in the presence of an interaction term that makes this interpretation with simply a regression table rather complicated, it makes sense to compute the marginal effects for federalism on “cgexp” while holding the value of trade at its mean. First, we’ll calculate the mean of the “trade” variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Finds mean value of trade variable</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(pt_copy<span class="sc">$</span>trade)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 78.7659</code></pre>
</div>
</div>
<p>Then, we’ll incorporate this value into the <code>ggpredict()</code> function, which is used to comput marginal effects in regressions that incorporate interaction terms. The first argument to <code>ggpredict()</code> is the regression output (<code>trade_federal_interaction</code>) so that <code>ggpredict()</code> knows the model we’re estimating. The argument <code>terms=federal</code> indicates that we are interested in the marginal effects of the federalism variable (rather than the trade) variable; finally, <code>condition=c(trade=78.7659</code> indicates that we want to compute the marginal effect of federalism on “cgexp” when the trade variable is held at its men. We’ll assign the resulting marginal effects table to an object named <code>marginal_effect_federalism</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculates marginal effects of federalism, with "trade" held at mean</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>marginal_effect_federalism<span class="ot">&lt;-</span><span class="fu">ggpredict</span>(trade_federal_interaction, <span class="at">terms=</span><span class="st">"federal"</span>, <span class="at">condition=</span><span class="fu">c</span>(<span class="at">trade=</span><span class="fl">78.7659</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, let’s go ahead and print the contents of <code>marginal_effect_federalism</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prints marginal effects table</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>marginal_effect_federalism</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Predicted values of cgexp

federal | Predicted |       95% CI
----------------------------------
      0 |     29.43 | 26.90, 31.95
      1 |     25.52 | 18.81, 32.22</code></pre>
</div>
</div>
<p>This table indicates the predicted value for the “cgexp” variable for non-federal (<code>federal=0</code>) countries is 29.43, while the predicted value for federal (<code>federal=1</code>) countries is 25.52. So on average, the GDP share of central government expenditure is about 3.91 points higher for non-federal countries. The table also provides confidence intervals for these predicted values, and just by eyeballing them, it looks like there’s quite a bit of overlap in them, indicating that the difference is probably not statistically significant. Creating a visual representation of the marginal effects could allow us to communicate this much more quickly and intuitively. Let’s use <em>ggplot</em>2 to make a quick visualization of <code>marginal_effect_federalism</code>. Before doing so, it’s useful to note that when we print the contents of <code>marginal_effect_federalism</code> to the console, it’s specially formatted; in fact, that object is a data frame, and we can view it’s actual underlying structure by explicitly printing it as a data frame:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints underlying structure of "marginal_effect_federalism"</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">as.data.frame</span>(marginal_effect_federalism))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x predicted std.error conf.low conf.high group
1 0  29.42659  1.266891 26.90389  31.94929     1
2 1  25.51593  3.368906 18.80758  32.22428     1</code></pre>
</div>
</div>
<p>Having this in front of us can make the process of translating the <code>marginal_effect_federalism</code> into a plot more intuitive. Let’s go ahead and make our plot, which we’ll assign to an object named <code>marginal_effect_federalism_plotted:</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creates plot of "marginal_effect_federalism"; shows impact of federalism on cgexp when trade is held at means, with 95% confidence intervals</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>marginal_effect_federalism_plotted<span class="ot">&lt;-</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(marginal_effect_federalism)<span class="sc">+</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>x, predicted))<span class="sc">+</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">ymin=</span>conf.low, <span class="at">ymax=</span>conf.high),<span class="at">width=</span><span class="fl">0.05</span>)<span class="sc">+</span></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span>(<span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>, <span class="at">by=</span><span class="dv">1</span>)))<span class="sc">+</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Predicted Effects of Federalism on Gov't Expenditure</span><span class="sc">\n</span><span class="st">(with trade set to mean)"</span>, <span class="at">y=</span><span class="st">"Predicted Expenditure"</span>, <span class="at">x=</span><span class="st">"Federalism"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The syntax should be fairly familiar. In the first line <code>ggplot(marginal_effect_federalism)</code>, we declare the data that’s being plotted. Within the <code>geom_point()</code> function, <code>aes(x=x, predicted)</code> indicates that we want the dichotomous “federal” variable on the horizontal axis, and the predicted effects on the y-axis. Then, <code>geom_errorbar(aes(x=x, ymin=conf.low, ymax=conf.high),width=0.05)</code> formats and customizes the error bars; <code>x=x</code> tells <em>ggplot2</em> to place the error bar at the x values at the points, while <code>ymin=conf.low</code> and <code>ymax=conf.high</code> indicate the lower confidence bound (the bottom of the error bar) and the upper confidence bound (the top of the error bar) respectively. Thw “width” argument controls the thickness of the error bars. Next, <code>scale_x_continuous(breaks=(seq(0,1, by=1)))</code> tells <em>ggplot</em> to place tick marks at 0 and 1 on the x-axis, which is appropriate since our x variable (“federal”) is a binary variable. The <code>labs()</code> function, of course, sets the labels. Let’s see what the plot looks like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of "marginal_effect_federalism_plotted"</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>marginal_effect_federalism_plotted</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="session4_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="integrating-datasets" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Integrating Datasets</h1>
<p>So far, we’ve only been working with a single dataset, but complex research projects typically require that multiple datasets are integrated or brought into conversation with each other. In this section, we’ll review some tools and techniques that facilitate typical tasks involving multiple datasets.</p>
<section id="data-transfer-part-2-reading-in-multiple-datasets" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="data-transfer-part-2-reading-in-multiple-datasets"><span class="header-section-number">5.1</span> Data Transfer Part 2: Reading in Multiple Datasets</h2>
<p>Let’s say that we have multiple datasets that we want to load into memory; in this case, we want to load the World Bank datasets in the “wb” directory of the data folder. The first step is to make a character vector of the file names we want to read in. The code below uses the <code>list.files()</code> function to extract the file names of the files in the “data/wb” directory to a character vector, which we’ll assign to an object named “worldbank_filenames”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints the names of the files we want to read in and assigns the vector of strings to a new object named "worldbank_filenames" </span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>worldbank_filenames<span class="ot">&lt;-</span><span class="fu">list.files</span>(<span class="st">"data/wb"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s confirm that the file names have been written correctly:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "worldbank_filenames"</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>worldbank_filenames</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "wdi_debt2019.csv"  "wdi_fdi2019.csv"   "wdi_trade2019.csv"
[4] "wdi_urban2019.csv"</code></pre>
</div>
</div>
<p>Now, we’ll use the <code>map()</code> function to iteratively pass the file names in the <code>worldbank_filenames</code> vector to the <code>read_csv()</code> function, and deposit the imported files into a list named <code>world_bank_list</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># iteratively passes file names in "worldbank_filenames" to the "read_csv" function, and deposits imported world bank files into a list that is assigned to an object named "world_bank_list"; assumes the working directory is the one with the world bank files</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"data/wb"</span>)</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>world_bank_list<span class="ot">&lt;-</span><span class="fu">map</span>(worldbank_filenames, read_csv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 271 Columns: 5
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (5): Country Name, Country Code, Series Name, Series Code, 2019 [YR2019]

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
Rows: 271 Columns: 5
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (5): Country Name, Country Code, Series Name, Series Code, 2019 [YR2019]

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
Rows: 271 Columns: 5
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (5): Country Name, Country Code, Series Name, Series Code, 2019 [YR2019]

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
Rows: 271 Columns: 5
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (5): Country Name, Country Code, Series Name, Series Code, 2019 [YR2019]

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>Now, let’s go ahead print the contents of <code>world_bank_list</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of "world_bank_list"</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>world_bank_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
# A tibble: 271 × 5
   `Country Name`     `Country Code` `Series Name` `Series Code` `2019 [YR2019]`
   &lt;chr&gt;              &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;          
 1 Afghanistan        AFG            Central gove… GC.DOD.TOTL.… ..             
 2 Albania            ALB            Central gove… GC.DOD.TOTL.… 75.69848824949…
 3 Algeria            DZA            Central gove… GC.DOD.TOTL.… ..             
 4 American Samoa     ASM            Central gove… GC.DOD.TOTL.… ..             
 5 Andorra            AND            Central gove… GC.DOD.TOTL.… ..             
 6 Angola             AGO            Central gove… GC.DOD.TOTL.… ..             
 7 Antigua and Barbu… ATG            Central gove… GC.DOD.TOTL.… ..             
 8 Argentina          ARG            Central gove… GC.DOD.TOTL.… ..             
 9 Armenia            ARM            Central gove… GC.DOD.TOTL.… 50.02842068637…
10 Aruba              ABW            Central gove… GC.DOD.TOTL.… ..             
# ℹ 261 more rows

[[2]]
# A tibble: 271 × 5
   `Country Name`     `Country Code` `Series Name` `Series Code` `2019 [YR2019]`
   &lt;chr&gt;              &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;          
 1 Afghanistan        AFG            Foreign dire… BX.KLT.DINV.… 0.124495985791…
 2 Albania            ALB            Foreign dire… BX.KLT.DINV.… 7.797920483865…
 3 Algeria            DZA            Foreign dire… BX.KLT.DINV.… 0.804144058246…
 4 American Samoa     ASM            Foreign dire… BX.KLT.DINV.… ..             
 5 Andorra            AND            Foreign dire… BX.KLT.DINV.… ..             
 6 Angola             AGO            Foreign dire… BX.KLT.DINV.… -5.78081314444…
 7 Antigua and Barbu… ATG            Foreign dire… BX.KLT.DINV.… 7.433324076307…
 8 Argentina          ARG            Foreign dire… BX.KLT.DINV.… 1.485006875706…
 9 Armenia            ARM            Foreign dire… BX.KLT.DINV.… 0.736361516844…
10 Aruba              ABW            Foreign dire… BX.KLT.DINV.… -2.21528256776…
# ℹ 261 more rows

[[3]]
# A tibble: 271 × 5
   `Country Name`     `Country Code` `Series Name` `Series Code` `2019 [YR2019]`
   &lt;chr&gt;              &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;          
 1 Afghanistan        AFG            Trade (% of … NE.TRD.GNFS.… ..             
 2 Albania            ALB            Trade (% of … NE.TRD.GNFS.… 76.27919464957…
 3 Algeria            DZA            Trade (% of … NE.TRD.GNFS.… 51.80973844157…
 4 American Samoa     ASM            Trade (% of … NE.TRD.GNFS.… 156.5687789799…
 5 Andorra            AND            Trade (% of … NE.TRD.GNFS.… ..             
 6 Angola             AGO            Trade (% of … NE.TRD.GNFS.… 57.82953811830…
 7 Antigua and Barbu… ATG            Trade (% of … NE.TRD.GNFS.… 137.6251757558…
 8 Argentina          ARG            Trade (% of … NE.TRD.GNFS.… 32.63061504584…
 9 Armenia            ARM            Trade (% of … NE.TRD.GNFS.… 96.11415412887…
10 Aruba              ABW            Trade (% of … NE.TRD.GNFS.… 145.3435727352…
# ℹ 261 more rows

[[4]]
# A tibble: 271 × 5
   `Country Name`     `Country Code` `Series Name` `Series Code` `2019 [YR2019]`
   &lt;chr&gt;              &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;          
 1 Afghanistan        AFG            Urban popula… SP.URB.TOTL.… 25.754         
 2 Albania            ALB            Urban popula… SP.URB.TOTL.… 61.229         
 3 Algeria            DZA            Urban popula… SP.URB.TOTL.… 73.189         
 4 American Samoa     ASM            Urban popula… SP.URB.TOTL.… 87.147         
 5 Andorra            AND            Urban popula… SP.URB.TOTL.… 87.984         
 6 Angola             AGO            Urban popula… SP.URB.TOTL.… 66.177         
 7 Antigua and Barbu… ATG            Urban popula… SP.URB.TOTL.… 24.506         
 8 Argentina          ARG            Urban popula… SP.URB.TOTL.… 91.991         
 9 Armenia            ARM            Urban popula… SP.URB.TOTL.… 63.219         
10 Aruba              ABW            Urban popula… SP.URB.TOTL.… 43.546         
# ℹ 261 more rows</code></pre>
</div>
</div>
<p>It could be useful to label the list elements of <code>world_bank_list</code>. For labels, it would make sense to use the file names in <code>worldbank_filenames</code>, without the “.csv” extension. Below, we use the <code>str_remove()</code> function to remove the “.csv” extension from the file names in <code>worldbank_filenames</code> and assign the result to a new object named <code>worldbank_filenames_base</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removes CSV extension from "worldbank_filenames"</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>worldbank_filenames_base<span class="ot">&lt;-</span><span class="fu">str_remove</span>(worldbank_filenames, <span class="st">".csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, let’s use the <code>names()</code> argument to assign the labels in <code>worldbank_filenames_base</code> to the elements in <code>world_bank_list</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># assigns names to datasets in "world_bank_list"</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(world_bank_list)<span class="ot">&lt;-</span>worldbank_filenames_base</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now that the file names are assigned, we can extract list elements by their labels:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extracts fdi dataset from "world_bank_list" by assigned name</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>world_bank_list[[<span class="st">"wdi_fdi2019"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  `Country Name` `Country Code` `Series Name`      `Series Code` `2019 [YR2019]`
  &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;              &lt;chr&gt;         &lt;chr&gt;          
1 Afghanistan    AFG            Foreign direct in… BX.KLT.DINV.… 0.124495985791…
2 Albania        ALB            Foreign direct in… BX.KLT.DINV.… 7.797920483865…
3 Algeria        DZA            Foreign direct in… BX.KLT.DINV.… 0.804144058246…
4 American Samoa ASM            Foreign direct in… BX.KLT.DINV.… ..             
5 Andorra        AND            Foreign direct in… BX.KLT.DINV.… ..             
6 Angola         AGO            Foreign direct in… BX.KLT.DINV.… -5.78081314444…</code></pre>
</div>
</div>
</section>
<section id="joining-data" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="joining-data"><span class="header-section-number">5.2</span> Joining Data</h2>
<p>Joining, or merging, distinct datasets into a single dataset based on a common variable that exists in both individual datasets is an essential operation in most research projects. To see how we can implement joins in R using the <code>join()</code> family of functions, let’s first pull out two of the list elements in <code>world_bank_list</code> and assign them to objects in the global environment. First, we’ll extract the dataset on foreign direct investment, and assign it to an object named <code>wdi_fdi</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extracts fdi dataset from "world_bank_list" by assigned name and assigns it to a new object named "wdi_fdi"</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>wdi_fdi<span class="ot">&lt;-</span>world_bank_list[[<span class="st">"wdi_fdi2019"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then, we’ll extract the World Bank trade dataset and assign it to an object named <code>wdi_trade</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extracts debt dataset from "world_bank_list" by assigned name and assigns it to a new object named "wdi_debt"</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>wdi_trade<span class="ot">&lt;-</span>world_bank_list[[<span class="st">"wdi_trade2019"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then, we’ll clean up these datasets by dropping rows with NA values, and then renaming the awkwardly named “2019 [YR2019’” variables in each of the datasets to something more intuitive and descriptive:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># drop na's and rename variable in in trade dataset and assign to "wdi_trade_cleaned"</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>wdi_trade_cleaned<span class="ot">&lt;-</span>wdi_trade <span class="sc">%&gt;%</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rename</span>(<span class="at">trade_2019=</span><span class="st">`</span><span class="at">2019 [YR2019]</span><span class="st">`</span>)</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a><span class="co"># drop na's and rename variable in in FDI dataset and assign to "wdi_fdi_cleaned"</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>wdi_fdi_cleaned<span class="ot">&lt;-</span>wdi_fdi <span class="sc">%&gt;%</span> </span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rename</span>(<span class="at">fdi_2019=</span><span class="st">`</span><span class="at">2019 [YR2019]</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we can go ahead and use a <code>join()</code> function, to merge the datasets together. There are several different versions of the <code>join()</code> function, and you should read the documentation to learn more, and make sure you’re applying the correct function given the context of your research (<code>?join</code>). We will use the <code>full_join()</code> function, which keeps all of the observations from each of the component datasets in the joined (i.e.&nbsp;output) dataset (even those that do not have a corresponding observation in the other dataset). Below, we call the <code>full_join()</code> function, and pass as arguments the two datasets we’d like to join. The specification <code>by="Country Code"</code> indicates that the join field (i.e.&nbsp;the common field that can be used to link the data frames) is the “Country Code” variable. The column containing the country codes is named “Country Code” in both columns, which makes this especially easy; if, however, the columns containing the join variable were named differently, we could equate them within the <code>full_join()</code> function by passing a vector to the “by” argument that specifies the join field from each component dataset. For example, if the country code variable was in a column named “iso3” in <code>wdi_fdi</code> and “Country Code” in <code>wdi_trade</code>, we could specify <code>by=c("iso3"="Country Code")</code> to let the function know that the join field in <code>wdi_fdi</code> is “iso3” and the join field in <code>wdi_trade</code> is “Country Code”. Below, we assign the product of the join to a new object named <code>fdi_trade_join</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># join together "wdi_fdi_cleaned" and "wdi_fdi_cleaned" using country code</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>fdi_trade_join<span class="ot">&lt;-</span><span class="fu">full_join</span>(wdi_fdi_cleaned, wdi_trade_cleaned, <span class="at">by=</span><span class="st">"Country Code"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s see what <code>fdi_trade_join</code> looks like by passing it to the R Studio Viewer:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(fdi_trade_join)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-ccf826f26c86fc10f325" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ccf826f26c86fc10f325">{"x":{"filter":"none","vertical":false,"extensions":["Scroller","FixedColumns"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266"],["Afghanistan","Albania","Algeria","American Samoa","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas, The","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","British Virgin Islands","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Cayman Islands","Central African Republic","Chad","Channel Islands","Chile","China","Colombia","Comoros","Congo, Dem. Rep.","Congo, Rep.","Costa Rica","Cote d'Ivoire","Croatia","Cuba","Curacao","Cyprus","Czechia","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt, Arab Rep.","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Faroe Islands","Fiji","Finland","France","French Polynesia","Gabon","Gambia, The","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guam","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hong Kong SAR, China","Hungary","Iceland","India","Indonesia","Iran, Islamic Rep.","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea, Dem. People's Rep.","Korea, Rep.","Kosovo","Kuwait","Kyrgyz Republic","Lao PDR","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macao SAR, China","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia, Fed. Sts.","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","North Macedonia","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","Qatar","Romania","Russian Federation","Rwanda","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Sint Maarten (Dutch part)","Slovak Republic","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","St. Kitts and Nevis","St. Lucia","St. Martin (French part)","St. Vincent and the Grenadines","Sudan","Suriname","Sweden","Switzerland","Syrian Arab Republic","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkiye","Turkmenistan","Turks and Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela, RB","Viet Nam","Virgin Islands (U.S.)","West Bank and Gaza","Yemen, Rep.","Zambia","Zimbabwe","Africa Eastern and Southern","Africa Western and Central","Arab World","Caribbean small states","Central Europe and the Baltics","Early-demographic dividend","East Asia &amp; Pacific","East Asia &amp; Pacific (excluding high income)","East Asia &amp; Pacific (IDA &amp; IBRD countries)","Euro area","Europe &amp; Central Asia","Europe &amp; Central Asia (excluding high income)","Europe &amp; Central Asia (IDA &amp; IBRD countries)","European Union","Fragile and conflict affected situations","Heavily indebted poor countries (HIPC)","High income","IBRD only","IDA &amp; IBRD total","IDA blend","IDA only","IDA total","Late-demographic dividend","Latin America &amp; Caribbean","Latin America &amp; Caribbean (excluding high income)","Latin America &amp; the Caribbean (IDA &amp; IBRD countries)","Least developed countries: UN classification","Low &amp; middle income","Low income","Lower middle income","Middle East &amp; North Africa","Middle East &amp; North Africa (excluding high income)","Middle East &amp; North Africa (IDA &amp; IBRD countries)","Middle income","North America","Not classified","OECD members","Other small states","Pacific island small states","Post-demographic dividend","Pre-demographic dividend","Small states","South Asia","South Asia (IDA &amp; IBRD)","Sub-Saharan Africa","Sub-Saharan Africa (excluding high income)","Sub-Saharan Africa (IDA &amp; IBRD countries)","Upper middle income","World"],["AFG","ALB","DZA","ASM","AND","AGO","ATG","ARG","ARM","ABW","AUS","AUT","AZE","BHS","BHR","BGD","BRB","BLR","BEL","BLZ","BEN","BMU","BTN","BOL","BIH","BWA","BRA","VGB","BRN","BGR","BFA","BDI","CPV","KHM","CMR","CAN","CYM","CAF","TCD","CHI","CHL","CHN","COL","COM","COD","COG","CRI","CIV","HRV","CUB","CUW","CYP","CZE","DNK","DJI","DMA","DOM","ECU","EGY","SLV","GNQ","ERI","EST","SWZ","ETH","FRO","FJI","FIN","FRA","PYF","GAB","GMB","GEO","DEU","GHA","GIB","GRC","GRL","GRD","GUM","GTM","GIN","GNB","GUY","HTI","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","IMN","ISR","ITA","JAM","JPN","JOR","KAZ","KEN","KIR","PRK","KOR","XKX","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LIE","LTU","LUX","MAC","MDG","MWI","MYS","MDV","MLI","MLT","MHL","MRT","MUS","MEX","FSM","MDA","MCO","MNG","MNE","MAR","MOZ","MMR","NAM","NRU","NPL","NLD","NCL","NZL","NIC","NER","NGA","MKD","MNP","NOR","OMN","PAK","PLW","PAN","PNG","PRY","PER","PHL","POL","PRT","PRI","QAT","ROU","RUS","RWA","WSM","SMR","STP","SAU","SEN","SRB","SYC","SLE","SGP","SXM","SVK","SVN","SLB","SOM","ZAF","SSD","ESP","LKA","KNA","LCA","MAF","VCT","SDN","SUR","SWE","CHE","SYR","TJK","TZA","THA","TLS","TGO","TON","TTO","TUN","TUR","TKM","TCA","TUV","UGA","UKR","ARE","GBR","USA","URY","UZB","VUT","VEN","VNM","VIR","PSE","YEM","ZMB","ZWE","AFE","AFW","ARB","CSS","CEB","EAR","EAS","EAP","TEA","EMU","ECS","ECA","TEC","EUU","FCS","HPC","HIC","IBD","IBT","IDB","IDX","IDA","LTE","LCN","LAC","TLA","LDC","LMY","LIC","LMC","MEA","MNA","TMN","MIC","NAC","INX","OED","OSS","PSS","PST","PRE","SST","SAS","TSA","SSF","SSA","TSS","UMC","WLD"],["Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)","Foreign direct investment, net inflows (% of GDP)"],["BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS","BX.KLT.DINV.WD.GD.ZS"],["0.124495985791329","7.79792048386519","0.804144058246544","..","..","-5.7808131444487","7.43332407630785","1.48500687570697","0.736361516844353","-2.21528256776249","2.79345368293896","-2.78770571216157","3.12183056112494","3.6927818725524","4.00518862174685","0.543233710331666","4.03231784838329","1.97686317571178","-3.98979364981819","3.93457925829276","1.51631080442569","0.0591344675296509","0.475617070464636","-0.529735011311977","2.18661377542075","0.559653480699367","3.69267321290506","..","2.77118007919323","3.22476396917176","1.0164787374761","0.040556947720545","5.45788755667341","13.5220209647967","2.5831964059044","2.80676687017653","18.1830873197548","1.15252967682269","5.00787801342363","..","4.87406503831311","1.31071593248213","4.33058240907475","0.359894031404716","2.60931448015292","-10.2147373124797","4.22094016660926","1.41719980536463","6.41082614786897","..","6.71586643004897","203.625433364883","4.25745331930823","-1.09718546490012","5.66550040200762","10.3084171305166","3.1809718229246","0.905594789228823","2.82732944960686","2.59024369040438","3.97995245506153","..","9.82202103786608","2.86531064179099","2.65736016138456","..","5.91952095846727","5.81407868801805","1.96049400180615","0.211401010736817","9.20409835236532","3.9194379121789","7.91323474836721","1.90205922776563","5.67741655020323","..","2.43584347799923","..","16.3973140363487","..","1.51707101923107","0.330286821833642","4.97754712507096","32.7649489760172","0.499464210439719","3.80668670933849","16.0571325877868","60.0414042352445","-2.25459249123475","1.78482633953521","2.23336204282241","0.531641985022407","-1.31640616709339","-11.689488034703","..","4.31398063025056","1.55049869758514","4.20330596139907","0.780785313301259","1.63971263094598","2.05367649290766","0.468168547481475","-0.318686670832408","..","0.58339386057331","3.60874710724505","0.378596561610448","4.3096066288398","4.03149181360237","3.25660840923509","3.69413245000342","1.51283206840873","2.61121194879185","0","..","6.26599401037917","234.248695216893","11.8178697739571","3.36279830994654","0.500915850281206","2.50697705748044","16.783472849825","4.97152245435128","27.2829836641604","2.22629031565469","-11.1917343784634","3.07610894576954","2.29130490063043","..","4.32157242106837","..","17.1989395200126","7.53492922355211","1.33479789567415","21.7841913105848","2.31189862056083","-1.40710630883469","..","0.542801979795753","-2.00180072222702","7.63514851485194","1.36830790930968","3.96093276376916","5.56378872791907","0.485777627795016","4.35892493383855","..","3.99513402641074","4.81225302279426","0.696146480411465","19.2286157721356","6.05160547781423","1.35578864340193","1.06104676965212","2.08489665412022","2.30117498594757","2.9559180510572","4.30025203399647","..","-1.59472537646872","2.93423089654186","1.88851731564914","2.54363065684298","-0.238656491573745","..","5.85791807167711","0.544093215724094","4.55247618583037","8.28646410409572","15.6274892674152","8.39920004737159","27.9412497426965","5.24677626460558","2.1566313678747","3.95600273865327","2.02495081496878","4.74500569821254","1.31407752294385","..","1.85614863696109","0.835214752952834","5.6414137709831","3.5913805814328","..","7.55828893565454","2.55226968828806","2.09560541663346","3.09382236180391","1.21642491474438","..","2.56372126311277","1.99459353959394","1.01451188952294","3.67928327906685","4.9437244573784","0.340279568811314","0.773783085518185","1.93333257157672","1.25478651517783","4.09797710355936","2.25165599228338","0.552188355301927","3.6030428562421","3.76649676088543","4.27633945790034","0.694070007703287","1.47787452846554","2.36872631991584","3.84264818715085","3.96283923161648","..","4.821074861051","..","0.769720046510608","-1.69494383154926","2.35091904331731","1.14280558495638","1.4947679328423","1.51234540444217","1.35967464245026","5.20015649478046","9.10350652968274","1.86828713793919","1.97010969372478","1.51870049281137","1.51870049281137","2.60668211054306","2.67057574274789","2.15331493140111","2.37839314406759","3.20443910482895","1.32752904273712","2.93197747369605","2.26242454672708","1.84993936935581","1.84454781391223","0.787560950159654","2.55068125137065","1.77619622658246","1.89719301430637","3.07468766155984","2.88914089862139","3.05561948393028","1.77285611880412","1.76407052129947","3.41049428611289","1.78136969548668","1.75922491579386","1.00479583316845","1.00773812308195","1.74342387641104","1.57759260878076","..","1.89194217418784","14.6763426862624","4.43405669145835","2.25409135081266","0.695200727025304","13.0690583291126","1.54936635321104","1.54936635321104","1.50271019425091","1.48994763782289","1.50271019425091","1.7328608827864","2.07940736679391"],["Afghanistan","Albania","Algeria","American Samoa","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas, The","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","British Virgin Islands","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Cayman Islands","Central African Republic","Chad","Channel Islands","Chile","China","Colombia","Comoros","Congo, Dem. Rep.","Congo, Rep.","Costa Rica","Cote d'Ivoire","Croatia","Cuba","Curacao","Cyprus","Czechia","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt, Arab Rep.","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Faroe Islands","Fiji","Finland","France","French Polynesia","Gabon","Gambia, The","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guam","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hong Kong SAR, China","Hungary","Iceland","India","Indonesia","Iran, Islamic Rep.","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea, Dem. People's Rep.","Korea, Rep.","Kosovo","Kuwait","Kyrgyz Republic","Lao PDR","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macao SAR, China","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia, Fed. Sts.","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","North Macedonia","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","Qatar","Romania","Russian Federation","Rwanda","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Sint Maarten (Dutch part)","Slovak Republic","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","St. Kitts and Nevis","St. Lucia","St. Martin (French part)","St. Vincent and the Grenadines","Sudan","Suriname","Sweden","Switzerland","Syrian Arab Republic","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkiye","Turkmenistan","Turks and Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela, RB","Viet Nam","Virgin Islands (U.S.)","West Bank and Gaza","Yemen, Rep.","Zambia","Zimbabwe","Africa Eastern and Southern","Africa Western and Central","Arab World","Caribbean small states","Central Europe and the Baltics","Early-demographic dividend","East Asia &amp; Pacific","East Asia &amp; Pacific (excluding high income)","East Asia &amp; Pacific (IDA &amp; IBRD countries)","Euro area","Europe &amp; Central Asia","Europe &amp; Central Asia (excluding high income)","Europe &amp; Central Asia (IDA &amp; IBRD countries)","European Union","Fragile and conflict affected situations","Heavily indebted poor countries (HIPC)","High income","IBRD only","IDA &amp; IBRD total","IDA blend","IDA only","IDA total","Late-demographic dividend","Latin America &amp; Caribbean","Latin America &amp; Caribbean (excluding high income)","Latin America &amp; the Caribbean (IDA &amp; IBRD countries)","Least developed countries: UN classification","Low &amp; middle income","Low income","Lower middle income","Middle East &amp; North Africa","Middle East &amp; North Africa (excluding high income)","Middle East &amp; North Africa (IDA &amp; IBRD countries)","Middle income","North America","Not classified","OECD members","Other small states","Pacific island small states","Post-demographic dividend","Pre-demographic dividend","Small states","South Asia","South Asia (IDA &amp; IBRD)","Sub-Saharan Africa","Sub-Saharan Africa (excluding high income)","Sub-Saharan Africa (IDA &amp; IBRD countries)","Upper middle income","World"],["Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)","Trade (% of GDP)"],["NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS","NE.TRD.GNFS.ZS"],["..","76.2791946495763","51.8097384415762","156.568778979907","..","57.8295381183036","137.625175755884","32.6306150458499","96.1141541288708","145.343572735289","45.7489633556611","107.892514611522","85.8181454084561","72.3992434162665","141.700834964514","31.5780512814675","80.8550673082324","130.850132114123","164.166215073989","102.201303476517","63.68133231423","77.5601016506443","76.1235174155789","56.3973067281247","94.5161278874242","83.0929813601175","28.8902578692948","..","108.509658357959","124.688701193655","60.4086928806888","29.0262100000001","103.602656463726","123.556523773641","43.3785132480415","66.1714852804959","114.838539695171","50.0658000014868","74.5705255558558","..","57.5468575300305","35.8900960338084","37.558533980839","42.2680785350184","55.2351580399854","91.5757577206648","65.7605300175717","44.5274919384227","101.375238725593","22.8207944494506","..","151.944491675827","141.771023662617","110.224828604234","320.939002998625","..","51.0111449209557","46.0768211909258","41.1240171551108","76.0420130991468","94.8787924253545","..","143.754530253766","89.188621687827","28.8153010070423","108.623245950251","107.411463822998","79.605433214652","64.1414731902028","63.3061124024003","73.4280894486644","53.2696525651825","118.599368307339","88.3183894580195","76.8248018271755","..","81.885923258543","92.1907515607492","..","77.8353754319824","45.5167427491815","78.4153132291929","55.3725855838767","..","44.5687187734548","98.0275897083463","353.743521139731","160.751343279331","82.8627457813882","39.9054035298391","37.6277775362938","50.7543343501077","68.9899384202806","252.495271979574","..","56.2695344799558","59.8789802234549","90.1106076335994","35.2164181084145","85.8214387441846","64.8586165517565","31.7594667253776","119.84126984127","..","75.757138965219","85.7534085053482","98.1829442370446","..","..","120.743136668005","62.98091601016","142.226138607513","..","78.2091278508398","..","149.176211356567","382.348369203003","114.703063841274","62.6013230457128","..","123.028562027943","..","63.6587027660517","309.61715026097","153.598392568969","93.4866941351317","96.4919509166035","77.3963247757157","104.495192307692","87.6322371148906","..","124.396514621165","108.844577462214","75.9981158798422","..","..","82.9011520693409","156","49.2495265869012","155.270676645491","..","54.3841804066818","94.04228104628","37.1025664250326","..","138.576231840539","104.572396274344","70.8958205272987","86.4761336586","28.9055757994453","..","..","..","71.2221617342433","46.9435053754409","68.8418422585097","102.688713790566","86.5647174091784","107.571456836722","90.0463755501859","84.5030610232464","49.2287536619033","57.9923275443865","83.3310820410377","307.264778085553","..","60.1981894249545","64.2362506061005","111.954597500673","196.972328714042","56.1906488750949","321.703497216311","..","183.493447095806","158.638466880546","82.9983376152335","69.572186456566","53.8979964086103","..","66.8738905174013","49.4255258543722","..","..","..","..","26.1196204552625","..","91.4338289680865","124.127612180467","41.9994711236162","56.0450159145896","33.0185892502311","109.689514715166","70.8064146926001","56.3421740349757","87.1654471936074","..","100.936008262245","63.1932903231036","44.2857594037204","..","..","39.3610539647435","90.5112342910763","167.383564925995","64.6651336372235","26.4519494737854","49.5573052535871","72.5183267330503","99.3829688227082","..","164.704214531318","155.399174957535","68.9934922812035","..","68.791204936096","55.7959609917419","51.6315805117886","..","81.375450138496","..","122.208253920517","52.5228107734728","53.7112082438589","43.2887423052987","43.2899677441247","89.9062406696633","84.3698046954109","61.3850348549467","67.9564411536031","92.2681849767146","..","52.7986909625064","61.6223025107685","48.3716566924529","48.3838240000145","..","51.9050499873098","48.6128100401414","53.0681735513407","47.0368209245983","45.3506288805534","46.3772702322323","49.728295366021","46.8211709730293","48.3264810867882","53.1223031256306","77.0451676437319","57.7467670428491","57.6243395791239","46.8026318878848","29.8589170922788","..","56.4684571050666","109.001947932816","102.543119525487","58.0164108411152","..","107.191035456567","38.6504817706871","38.6504817706871","54.8236255441814","54.6644505589253","54.8236255441815","45.2753999757702","56.4978896229091"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Country Name.x<\/th>\n      <th>Country Code<\/th>\n      <th>Series Name.x<\/th>\n      <th>Series Code.x<\/th>\n      <th>fdi_2019<\/th>\n      <th>Country Name.y<\/th>\n      <th>Series Name.y<\/th>\n      <th>Series Code.y<\/th>\n      <th>trade_2019<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"deferRender":true,"scrollY":350,"scrollX":350,"dom":"t","scroller":true,"fixedColumns":{"leftColumns":3},"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Country Name.x","targets":1},{"name":"Country Code","targets":2},{"name":"Series Name.x","targets":3},{"name":"Series Code.x","targets":4},{"name":"fdi_2019","targets":5},{"name":"Country Name.y","targets":6},{"name":"Series Name.y","targets":7},{"name":"Series Code.y","targets":8},{"name":"trade_2019","targets":9}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Note that both variables are now in the dataset as separate columns.</p>
</section>
<section id="appending-data" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="appending-data"><span class="header-section-number">5.3</span> Appending Data</h2>
<p>If joining datasets is fundamentally about situating disparate datasets side-by-side in a new unified dataset, appending datasets is about stacking disparate datasets with a similar structure on top of each other in a new unified dataset. In other words, joining datasets leads to a unified dataset with more columns than the original individual datasets, while appending datasets leads to a unified dataset with more rows than the original individual datasets. Depending on the type of data you’re working with, appending data can be just as important a method for bringing together disparate datasets.</p>
<p>We can easily append data frames a single unified data frame using the <code>bind_rows()</code> function from <em>dplyr</em>. Below, we append <code>wdi_fdi</code>to <code>wdi_trade</code> by passing these objects as arguments to the <code>bind_rows()</code> function. We’ll assign the appended dataset to a new object named <code>worldbank_trade_fdi_appended</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Appends "worldbank_trade_2019" to "worldbank_fdi_2019" and assigns new dataset to object named "worldbank_trade_fdi"</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>worldbank_trade_fdi_appended<span class="ot">&lt;-</span><span class="fu">bind_rows</span>(wdi_trade, wdi_fdi)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To confirm that the appending operation worked as expected, please view <code>worldbank_trade_fdi_appended</code> in the data viewer.</p>
</section>
<section id="reshaping-data" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="reshaping-data"><span class="header-section-number">5.4</span> Reshaping Data</h2>
<p>In a “wide” dataset, each variable or measurement is stored in a separate column; on the other hand, in a “long” dataset, each measurement is stored in a single column, and there is an additional column that identifies the specific variable or category for each observation. For example, in our context, <code>fdi_trade_join</code> is a “wide” dataset, while <code>worldbank_trade_fdi_appended</code> is formatted as a long dataset.</p>
<p>The process of converting a wide dataset to a long one, or vice versa, is typically referred to as reshaping data. Often, one will need to bring different datasets together (either through a join or append operation), but in order to successfully implement the required procedure, it is first necessary to reshape at least one of the datasets so that they’re correctly formatted. Below, we’ll quickly review some functions for carrying out these reshaping operations from the <em>tidyr</em> package, which is part of the <em>tidyverse</em> suite.</p>
<section id="long-to-wide" class="level3" data-number="5.4.1">
<h3 data-number="5.4.1" class="anchored" data-anchor-id="long-to-wide"><span class="header-section-number">5.4.1</span> Long to Wide</h3>
<p>To see how a “long to wide” operation works using the <em>tidyr</em> lets imagine we want to transform <code>worldbank_trade_fdi_appended</code>, currently formatted as a long dataset, into a wide dataset. First we’ll clean up <code>worldbank_trade_fdi_appended</code> using some familiar <em>tidyverse</em> functions, and assign the result to a new object named <code>worldbank_trade_fdi_cleaned</code> cleaned:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cleans the dataset before reshaping</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>worldbank_trade_fdi_cleaned<span class="ot">&lt;-</span>worldbank_trade_fdi_appended <span class="sc">%&gt;%</span> </span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">rename</span>(<span class="at">economic_variables=</span><span class="st">"2019 [YR2019]"</span>,</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">series_code=</span><span class="st">"Series Code"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">select</span>(<span class="sc">-</span><span class="st">"Series Name"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">drop_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Before proceeding, we should note that the column containing the data, “economic_variables” is formatted as a character variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints class of "economic_variables" column</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(worldbank_trade_fdi_cleaned<span class="sc">$</span>economic_variables)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>In order for the reshaping process to work, we need to transform that column into the “numeric” class, which we do with the following:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># converts "economic_variables" to numeric</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>worldbank_trade_fdi_cleaned<span class="sc">$</span>economic_variables<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(worldbank_trade_fdi_cleaned<span class="sc">$</span>economic_variables)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: NAs introduced by coercion</code></pre>
</div>
</div>
<p>Now, we use <em>tidyr</em>’s <code>pivote_wider</code> function to “pivot” the data from long to wide. Below, we’ll take <code>worldbank_trade_fdi_cleaned</code> and then feed that data into the <code>pivot_wider()</code> function using the %&gt;% operator. Within the <code>pivot_wider()</code> function, the “names_from” argument specifies the current column that contains the names we would like to use as column names in the reshaped dataset, while the “values_from” argument specifies the name of the current column that contains the data that will be used to populate the columns in the reshaped dataset. We’ll assign this code to a new object named <code>worldbank_trade_fdi_wide</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reshapes "worldbank_trade_fdi_cleaned" from long to wide and assigns the wide dataset to an object named "worldbank_trade_fdi_wide"</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>worldbank_trade_fdi_wide<span class="ot">&lt;-</span>worldbank_trade_fdi_cleaned <span class="sc">%&gt;%</span> </span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>                              tidyr<span class="sc">::</span> <span class="fu">pivot_wider</span>(<span class="at">names_from=</span>series_code,</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">values_from=</span>economic_variables)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s quickly take a look at the reshaped dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints contents of "worldbank_trade_fdi_wide"</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>worldbank_trade_fdi_wide</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  `Country Name` `Country Code` NE.TRD.GNFS.ZS BX.KLT.DINV.WD.GD.ZS
  &lt;chr&gt;          &lt;chr&gt;                   &lt;dbl&gt;                &lt;dbl&gt;
1 Afghanistan    AFG                      NA                  0.124
2 Albania        ALB                      76.3                7.80 
3 Algeria        DZA                      51.8                0.804
4 American Samoa ASM                     157.                NA    
5 Andorra        AND                      NA                 NA    
6 Angola         AGO                      57.8               -5.78 </code></pre>
</div>
</div>
<p>It might be nice to rename the variables to something more intuitive:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># renames columns in "worldbank_trade_fdi_wide"</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>worldbank_trade_fdi_wide<span class="ot">&lt;-</span>worldbank_trade_fdi_wide <span class="sc">%&gt;%</span> </span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">rename</span>(<span class="at">trade2019=</span>NE.TRD.GNFS.ZS,</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">FDI2019=</span>BX.KLT.DINV.WD.GD.ZS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Go ahead and inspect <code>worldbank_trade_fdi_wide</code> in the data viewer:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Views "worldbank_trade_fdi_wide" in the Viewer</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(worldbank_trade_fdi_wide)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-8d5aa8b88958ca5b01e5" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-8d5aa8b88958ca5b01e5">{"x":{"filter":"none","vertical":false,"extensions":["Scroller","FixedColumns"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266"],["Afghanistan","Albania","Algeria","American Samoa","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas, The","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","British Virgin Islands","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Cayman Islands","Central African Republic","Chad","Channel Islands","Chile","China","Colombia","Comoros","Congo, Dem. Rep.","Congo, Rep.","Costa Rica","Cote d'Ivoire","Croatia","Cuba","Curacao","Cyprus","Czechia","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt, Arab Rep.","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Faroe Islands","Fiji","Finland","France","French Polynesia","Gabon","Gambia, The","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guam","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hong Kong SAR, China","Hungary","Iceland","India","Indonesia","Iran, Islamic Rep.","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea, Dem. People's Rep.","Korea, Rep.","Kosovo","Kuwait","Kyrgyz Republic","Lao PDR","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macao SAR, China","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia, Fed. Sts.","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","North Macedonia","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","Qatar","Romania","Russian Federation","Rwanda","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Sint Maarten (Dutch part)","Slovak Republic","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","St. Kitts and Nevis","St. Lucia","St. Martin (French part)","St. Vincent and the Grenadines","Sudan","Suriname","Sweden","Switzerland","Syrian Arab Republic","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkiye","Turkmenistan","Turks and Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela, RB","Viet Nam","Virgin Islands (U.S.)","West Bank and Gaza","Yemen, Rep.","Zambia","Zimbabwe","Africa Eastern and Southern","Africa Western and Central","Arab World","Caribbean small states","Central Europe and the Baltics","Early-demographic dividend","East Asia &amp; Pacific","East Asia &amp; Pacific (excluding high income)","East Asia &amp; Pacific (IDA &amp; IBRD countries)","Euro area","Europe &amp; Central Asia","Europe &amp; Central Asia (excluding high income)","Europe &amp; Central Asia (IDA &amp; IBRD countries)","European Union","Fragile and conflict affected situations","Heavily indebted poor countries (HIPC)","High income","IBRD only","IDA &amp; IBRD total","IDA blend","IDA only","IDA total","Late-demographic dividend","Latin America &amp; Caribbean","Latin America &amp; Caribbean (excluding high income)","Latin America &amp; the Caribbean (IDA &amp; IBRD countries)","Least developed countries: UN classification","Low &amp; middle income","Low income","Lower middle income","Middle East &amp; North Africa","Middle East &amp; North Africa (excluding high income)","Middle East &amp; North Africa (IDA &amp; IBRD countries)","Middle income","North America","Not classified","OECD members","Other small states","Pacific island small states","Post-demographic dividend","Pre-demographic dividend","Small states","South Asia","South Asia (IDA &amp; IBRD)","Sub-Saharan Africa","Sub-Saharan Africa (excluding high income)","Sub-Saharan Africa (IDA &amp; IBRD countries)","Upper middle income","World"],["AFG","ALB","DZA","ASM","AND","AGO","ATG","ARG","ARM","ABW","AUS","AUT","AZE","BHS","BHR","BGD","BRB","BLR","BEL","BLZ","BEN","BMU","BTN","BOL","BIH","BWA","BRA","VGB","BRN","BGR","BFA","BDI","CPV","KHM","CMR","CAN","CYM","CAF","TCD","CHI","CHL","CHN","COL","COM","COD","COG","CRI","CIV","HRV","CUB","CUW","CYP","CZE","DNK","DJI","DMA","DOM","ECU","EGY","SLV","GNQ","ERI","EST","SWZ","ETH","FRO","FJI","FIN","FRA","PYF","GAB","GMB","GEO","DEU","GHA","GIB","GRC","GRL","GRD","GUM","GTM","GIN","GNB","GUY","HTI","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","IMN","ISR","ITA","JAM","JPN","JOR","KAZ","KEN","KIR","PRK","KOR","XKX","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LIE","LTU","LUX","MAC","MDG","MWI","MYS","MDV","MLI","MLT","MHL","MRT","MUS","MEX","FSM","MDA","MCO","MNG","MNE","MAR","MOZ","MMR","NAM","NRU","NPL","NLD","NCL","NZL","NIC","NER","NGA","MKD","MNP","NOR","OMN","PAK","PLW","PAN","PNG","PRY","PER","PHL","POL","PRT","PRI","QAT","ROU","RUS","RWA","WSM","SMR","STP","SAU","SEN","SRB","SYC","SLE","SGP","SXM","SVK","SVN","SLB","SOM","ZAF","SSD","ESP","LKA","KNA","LCA","MAF","VCT","SDN","SUR","SWE","CHE","SYR","TJK","TZA","THA","TLS","TGO","TON","TTO","TUN","TUR","TKM","TCA","TUV","UGA","UKR","ARE","GBR","USA","URY","UZB","VUT","VEN","VNM","VIR","PSE","YEM","ZMB","ZWE","AFE","AFW","ARB","CSS","CEB","EAR","EAS","EAP","TEA","EMU","ECS","ECA","TEC","EUU","FCS","HPC","HIC","IBD","IBT","IDB","IDX","IDA","LTE","LCN","LAC","TLA","LDC","LMY","LIC","LMC","MEA","MNA","TMN","MIC","NAC","INX","OED","OSS","PSS","PST","PRE","SST","SAS","TSA","SSF","SSA","TSS","UMC","WLD"],[null,76.2791946495763,51.8097384415762,156.568778979907,null,57.8295381183036,137.625175755884,32.6306150458499,96.11415412887079,145.343572735289,45.7489633556611,107.892514611522,85.8181454084561,72.3992434162665,141.700834964514,31.5780512814675,80.85506730823241,130.850132114123,164.166215073989,102.201303476517,63.68133231423,77.5601016506443,76.1235174155789,56.3973067281247,94.5161278874242,83.09298136011751,28.8902578692948,null,108.509658357959,124.688701193655,60.4086928806888,29.0262100000001,103.602656463726,123.556523773641,43.3785132480415,66.1714852804959,114.838539695171,50.0658000014868,74.5705255558558,null,57.5468575300305,35.8900960338084,37.558533980839,42.2680785350184,55.2351580399854,91.5757577206648,65.7605300175717,44.5274919384227,101.375238725593,22.8207944494506,null,151.944491675827,141.771023662617,110.224828604234,320.939002998625,null,51.0111449209557,46.0768211909258,41.1240171551108,76.0420130991468,94.8787924253545,null,143.754530253766,89.18862168782699,28.8153010070423,108.623245950251,107.411463822998,79.605433214652,64.1414731902028,63.3061124024003,73.42808944866439,53.2696525651825,118.599368307339,88.3183894580195,76.82480182717551,null,81.885923258543,92.19075156074921,null,77.8353754319824,45.5167427491815,78.4153132291929,55.3725855838767,null,44.5687187734548,98.0275897083463,353.743521139731,160.751343279331,82.8627457813882,39.9054035298391,37.6277775362938,50.7543343501077,68.98993842028059,252.495271979574,null,56.2695344799558,59.8789802234549,90.1106076335994,35.2164181084145,85.8214387441846,64.8586165517565,31.7594667253776,119.84126984127,null,75.757138965219,85.7534085053482,98.18294423704459,null,null,120.743136668005,62.98091601016,142.226138607513,null,78.20912785083981,null,149.176211356567,382.348369203003,114.703063841274,62.6013230457128,null,123.028562027943,null,63.6587027660517,309.61715026097,153.598392568969,93.4866941351317,96.4919509166035,77.3963247757157,104.495192307692,87.6322371148906,null,124.396514621165,108.844577462214,75.9981158798422,null,null,82.9011520693409,156,49.2495265869012,155.270676645491,null,54.3841804066818,94.04228104628,37.1025664250326,null,138.576231840539,104.572396274344,70.8958205272987,86.47613365860001,28.9055757994453,null,null,null,71.2221617342433,46.9435053754409,68.8418422585097,102.688713790566,86.5647174091784,107.571456836722,90.0463755501859,84.5030610232464,49.2287536619033,57.9923275443865,83.3310820410377,307.264778085553,null,60.1981894249545,64.2362506061005,111.954597500673,196.972328714042,56.1906488750949,321.703497216311,null,183.493447095806,158.638466880546,82.9983376152335,69.572186456566,53.8979964086103,null,66.87389051740131,49.4255258543722,null,null,null,null,26.1196204552625,null,91.4338289680865,124.127612180467,41.9994711236162,56.0450159145896,33.0185892502311,109.689514715166,70.8064146926001,56.3421740349757,87.16544719360741,null,100.936008262245,63.1932903231036,44.2857594037204,null,null,39.3610539647435,90.51123429107631,167.383564925995,64.66513363722351,26.4519494737854,49.5573052535871,72.5183267330503,99.38296882270819,null,164.704214531318,155.399174957535,68.9934922812035,null,68.79120493609599,55.7959609917419,51.6315805117886,null,81.37545013849601,null,122.208253920517,52.5228107734728,53.7112082438589,43.2887423052987,43.2899677441247,89.9062406696633,84.36980469541091,61.3850348549467,67.95644115360309,92.26818497671459,null,52.7986909625064,61.6223025107685,48.3716566924529,48.3838240000145,null,51.9050499873098,48.6128100401414,53.0681735513407,47.0368209245983,45.3506288805534,46.3772702322323,49.728295366021,46.8211709730293,48.3264810867882,53.1223031256306,77.0451676437319,57.7467670428491,57.6243395791239,46.8026318878848,29.8589170922788,null,56.4684571050666,109.001947932816,102.543119525487,58.0164108411152,null,107.191035456567,38.6504817706871,38.6504817706871,54.8236255441814,54.6644505589253,54.8236255441815,45.2753999757702,56.4978896229091],[0.124495985791329,7.79792048386519,0.804144058246544,null,null,-5.7808131444487,7.43332407630785,1.48500687570697,0.736361516844353,-2.21528256776249,2.79345368293896,-2.78770571216157,3.12183056112494,3.6927818725524,4.00518862174685,0.543233710331666,4.03231784838329,1.97686317571178,-3.98979364981819,3.93457925829276,1.51631080442569,0.0591344675296509,0.475617070464636,-0.529735011311977,2.18661377542075,0.559653480699367,3.69267321290506,null,2.77118007919323,3.22476396917176,1.0164787374761,0.040556947720545,5.45788755667341,13.5220209647967,2.5831964059044,2.80676687017653,18.1830873197548,1.15252967682269,5.00787801342363,null,4.87406503831311,1.31071593248213,4.33058240907475,0.359894031404716,2.60931448015292,-10.2147373124797,4.22094016660926,1.41719980536463,6.41082614786897,null,6.71586643004897,203.625433364883,4.25745331930823,-1.09718546490012,5.66550040200762,10.3084171305166,3.1809718229246,0.905594789228823,2.82732944960686,2.59024369040438,3.97995245506153,null,9.822021037866079,2.86531064179099,2.65736016138456,null,5.91952095846727,5.81407868801805,1.96049400180615,0.211401010736817,9.204098352365319,3.9194379121789,7.91323474836721,1.90205922776563,5.67741655020323,null,2.43584347799923,null,16.3973140363487,null,1.51707101923107,0.330286821833642,4.97754712507096,32.7649489760172,0.499464210439719,3.80668670933849,16.0571325877868,60.0414042352445,-2.25459249123475,1.78482633953521,2.23336204282241,0.531641985022407,-1.31640616709339,-11.689488034703,null,4.31398063025056,1.55049869758514,4.20330596139907,0.780785313301259,1.63971263094598,2.05367649290766,0.468168547481475,-0.318686670832408,null,0.58339386057331,3.60874710724505,0.378596561610448,4.3096066288398,4.03149181360237,3.25660840923509,3.69413245000342,1.51283206840873,2.61121194879185,0,null,6.26599401037917,234.248695216893,11.8178697739571,3.36279830994654,0.500915850281206,2.50697705748044,16.783472849825,4.97152245435128,27.2829836641604,2.22629031565469,-11.1917343784634,3.07610894576954,2.29130490063043,null,4.32157242106837,null,17.1989395200126,7.53492922355211,1.33479789567415,21.7841913105848,2.31189862056083,-1.40710630883469,null,0.542801979795753,-2.00180072222702,7.63514851485194,1.36830790930968,3.96093276376916,5.56378872791907,0.485777627795016,4.35892493383855,null,3.99513402641074,4.81225302279426,0.696146480411465,19.2286157721356,6.05160547781423,1.35578864340193,1.06104676965212,2.08489665412022,2.30117498594757,2.9559180510572,4.30025203399647,null,-1.59472537646872,2.93423089654186,1.88851731564914,2.54363065684298,-0.238656491573745,null,5.85791807167711,0.544093215724094,4.55247618583037,8.286464104095719,15.6274892674152,8.39920004737159,27.9412497426965,5.24677626460558,2.1566313678747,3.95600273865327,2.02495081496878,4.74500569821254,1.31407752294385,null,1.85614863696109,0.835214752952834,5.6414137709831,3.5913805814328,null,7.55828893565454,2.55226968828806,2.09560541663346,3.09382236180391,1.21642491474438,null,2.56372126311277,1.99459353959394,1.01451188952294,3.67928327906685,4.9437244573784,0.340279568811314,0.773783085518185,1.93333257157672,1.25478651517783,4.09797710355936,2.25165599228338,0.552188355301927,3.6030428562421,3.76649676088543,4.27633945790034,0.694070007703287,1.47787452846554,2.36872631991584,3.84264818715085,3.96283923161648,null,4.821074861051,null,0.769720046510608,-1.69494383154926,2.35091904331731,1.14280558495638,1.4947679328423,1.51234540444217,1.35967464245026,5.20015649478046,9.10350652968274,1.86828713793919,1.97010969372478,1.51870049281137,1.51870049281137,2.60668211054306,2.67057574274789,2.15331493140111,2.37839314406759,3.20443910482895,1.32752904273712,2.93197747369605,2.26242454672708,1.84993936935581,1.84454781391223,0.787560950159654,2.55068125137065,1.77619622658246,1.89719301430637,3.07468766155984,2.88914089862139,3.05561948393028,1.77285611880412,1.76407052129947,3.41049428611289,1.78136969548668,1.75922491579386,1.00479583316845,1.00773812308195,1.74342387641104,1.57759260878076,null,1.89194217418784,14.6763426862624,4.43405669145835,2.25409135081266,0.695200727025304,13.0690583291126,1.54936635321104,1.54936635321104,1.50271019425091,1.48994763782289,1.50271019425091,1.7328608827864,2.07940736679391]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Country Name<\/th>\n      <th>Country Code<\/th>\n      <th>trade2019<\/th>\n      <th>FDI2019<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"deferRender":true,"scrollY":350,"scrollX":350,"dom":"t","scroller":true,"fixedColumns":{"leftColumns":3},"columnDefs":[{"className":"dt-right","targets":[3,4]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Country Name","targets":1},{"name":"Country Code","targets":2},{"name":"trade2019","targets":3},{"name":"FDI2019","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="wide-to-long" class="level3" data-number="5.4.2">
<h3 data-number="5.4.2" class="anchored" data-anchor-id="wide-to-long"><span class="header-section-number">5.4.2</span> Wide to Long</h3>
<p>To make the conversion in the opposite direction, i.e.&nbsp;reshaping a dataset from wide to long, we can use the <code>pivot_longer()</code> function. Below, we take the <code>worldbank_trade_fdi_wide</code> data frame, and feed it into the <code>pivot_longer()</code> function using the <code>%&gt;%</code> operator. Within the function, we use <code>cols=c(FDI2019, trade2019)</code> to specify the current columns that we’re going to collapse into a single column in the new dataset. The “names_to” argument specifies the name of column that will hold the original “FDI2019” and “trade2019” columns, while the “values_to” argument specifies the name of the column that will actually hold the data. Let’s go ahead and run the code, and assign the output to a new object named <code>world_bank_trade_long</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reshapes "worldbank_trade_fdi_wide" back to long format and assigns the reshaped dataset to a new object named "world_bank_trade_long"</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>world_bank_trade_long<span class="ot">&lt;-</span>worldbank_trade_fdi_wide <span class="sc">%&gt;%</span> </span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="fu">c</span>(FDI2019, trade2019),</span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">names_to=</span><span class="st">"economic_variable"</span>,</span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">values_to =</span> <span class="st">"2019"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Please view <code>world_bank_trade_long</code> in the Viewer to confirm that it has been successfully reshaped.</p>
</section>
</section>
<section id="automating-data-processing-with-functions" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="automating-data-processing-with-functions"><span class="header-section-number">5.5</span> Automating Data Processing with Functions</h2>
<p>When working with multiple datasets, we may need to carry out identical operations on those datasets, in which case we could save time by wrapping up the relevant code in a function and iterating over the dataset elements we’d like to transform. Let’s say, for example, that we want to clean up our World Bank dataset by deleting a column, renaming others, and removing the rows where the country code is NA. Rather than carrying out these operations individually, let’s create a function, called <code>worldbank_cleaning_function</code>, that implements these changes and returns a clean dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># write function to clean World Bank dataset</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>worldbank_cleaning_function<span class="ot">&lt;-</span><span class="cf">function</span>(input_dataset){</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>  modified_dataset<span class="ot">&lt;-</span>input_dataset <span class="sc">%&gt;%</span> </span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">select</span>(<span class="sc">-</span><span class="st">"Series Code"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">rename</span>(<span class="st">"Country"</span><span class="ot">=</span><span class="st">"Country Name"</span>,</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"CountryCode"</span><span class="ot">=</span><span class="st">"Country Code"</span>,</span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Series"</span><span class="ot">=</span><span class="st">"Series Name"</span>,</span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"2019"</span><span class="ot">=</span><span class="st">"2019 [YR2019]"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">drop_na</span>(CountryCode)</span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(modified_dataset)</span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s test the function using <code>wdi_trade</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># passes "wdi_trade" to "worldbank_cleaning_function"</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="fu">worldbank_cleaning_function</span>(wdi_trade)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  Country        CountryCode Series           `2019`          
  &lt;chr&gt;          &lt;chr&gt;       &lt;chr&gt;            &lt;chr&gt;           
1 Afghanistan    AFG         Trade (% of GDP) ..              
2 Albania        ALB         Trade (% of GDP) 76.2791946495763
3 Algeria        DZA         Trade (% of GDP) 51.8097384415762
4 American Samoa ASM         Trade (% of GDP) 156.568778979907
5 Andorra        AND         Trade (% of GDP) ..              
6 Angola         AGO         Trade (% of GDP) 57.8295381183036</code></pre>
</div>
</div>
<p>That looked like it worked, so lets go ahead and apply <code>worldbank_cleaning_function</code> to all of the data frames in <code>world_bank_list</code>. We’ll use the familiar <code>map()</code> function to do so; below, <code>world_bank_list</code> is the list we’re iterating over, while <code>worldbank_cleaning_function()</code> is the function we’re applying:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Iteratively apply "worldbank_cleaning_function" to all of the datasets in "world_bank_list", and deposit the cleaned datasets into a new list named "world_bank_list_cleaned"</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>world_bank_list_cleaned<span class="ot">&lt;-</span><span class="fu">map</span>(<span class="at">.x=</span>world_bank_list, <span class="at">.f=</span>worldbank_cleaning_function)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Print out the list, or use indexing to extract an element of the list (i.e.&nbsp;one of the cleaned datasets) and confirm that the operation worked.</p>
</section>
</section>
<section id="data-transfer-part-3-exporting-data" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Data Transfer Part 3: Exporting Data</h1>
<p>After working in R, we will likely need (at some point) to get R objects out of the program and onto our local directory. This section reviews some functions that can help export a variety of objects in various file formats.</p>
<section id="exporting-a-data-frame" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="exporting-a-data-frame"><span class="header-section-number">6.1</span> Exporting a Data Frame</h2>
<p>There are various functions to export a data frame in a variety of file formats. Typically, it’s convenient to use the <code>write_csv()</code> function to export a data frame as a CSV file. Below, we export <code>worldbank_trade_fdi_wide</code> as a CSV to the “outputs” folder in our working directory. The first argument is the name of the object we want to export, while the second argument specifies the file path, name, and extension of the desired output file.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exports "worldbank_trade_fdi_wide" to a local directory</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(worldbank_trade_fdi_wide, <span class="st">"outputs/worldbank_trade_fdi.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exporting-a-summary-statistics-table" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="exporting-a-summary-statistics-table"><span class="header-section-number">6.2</span> Exporting a Summary Statistics Table</h2>
<p>If we want to export summary statistics, we can do so as a CSV. Recall the <code>pt_copy_summarystats1</code> file we created yesterday (i.e.&nbsp;a basic summary statistics table for the PT dataset), which we’ll recreate here:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># recreates pt_copy_summarystats1</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>pt_copy_summarystats1<span class="ot">&lt;-</span><span class="fu">describe</span>(pt_copy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Instead of using the <code>write_csv()</code> function, we’ll use the <code>write.csv()</code> function, which works similarly but allows us to specify that we want the row names of the data frame exported as well, which is useful in the context of summary statistics tables created by the <em>psych</em> package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># writes summary statistics table "pt_copy_summarystats1_df"  as CSV</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(pt_copy_summarystats1, <span class="st">"outputs/summary_statistics.csv"</span>, <span class="at">row.names =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can also use the <em>stargazer</em> package to write out summary statistics for a data frame, either as a text file, as in this case:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exports a text summary stats table with stargazer</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(<span class="fu">as.data.frame</span>(pt_copy), <span class="at">type=</span><span class="st">"text"</span>, <span class="at">title=</span><span class="st">"Descriptive Statistics"</span>, <span class="at">digits=</span><span class="dv">2</span>, <span class="at">out=</span><span class="st">"outputs/summary_stats.txt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Descriptive Statistics
========================================================
Statistic        N    Mean   St. Dev.   Min       Max   
--------------------------------------------------------
oecd             85   0.29     0.46      0         1    
pind             85   0.46     0.47     0.00     1.00   
pindo            85   0.61     0.46     0.00     1.00   
ctrycd           85  430.88   284.89    111       968   
col_uk           85   0.35     0.48      0         1    
t_indep          85  119.73   89.76      6        250   
col_uka          85   0.28     0.39     0.00     0.93   
col_espa         85   0.06     0.13     0.00     0.79   
col_otha         85   0.22     0.36     0.00     0.98   
legor_uk         85   0.39     0.49      0         1    
legor_so         85   0.13     0.34      0         1    
legor_fr         85   0.35     0.48      0         1    
legor_ge         85   0.07     0.26      0         1    
legor_sc         85   0.06     0.24      0         1    
prot80           85  17.46    25.50     0.00     97.80  
catho80          85  40.69    38.66     0.00     97.30  
confu            85   0.07     0.26      0         1    
avelf            85   0.29     0.26     0.00     0.84   
govef            81   4.21     1.75     0.84     7.26   
graft            81   4.17     1.89     0.74     6.92   
logyl            74   9.23     0.90     6.95     10.48  
loga             73   8.17     0.61     6.28     9.02   
yrsopen          75   0.52     0.54     0.00     4.09   
gadp             75   0.69     0.20     0.31     1.00   
engfrac          78   0.14     0.32     0.00     1.00   
eurfrac          78   0.40     0.44     0.00     1.00   
frankrom         78   2.87     0.84     0.94     5.64   
latitude         78  17.96    27.87    -36.89    63.89  
gastil           85   2.44     1.23     1.00     4.89   
cgexp            82  28.82    10.49     9.74     51.18  
cgrev            78  26.49    10.12     8.92     50.85  
ssw              71   8.15     6.67     0.13     22.38  
rgdph            85 6,688.63 5,495.17  530.22  20,782.81
trade            85  78.77    47.34    17.56    343.39  
prop1564         84  62.07     5.76    49.05     71.70  
prop65           84   8.45     4.89     2.30     17.43  
federal          83   0.16     0.37      0         1    
eduger           82  88.58    17.70    40.05    117.11  
spropn           77   0.13     0.25     0.00     1.00   
yearele          81 1,965.55  36.85   1,800.00 1,994.00 
yearreg          81 1,961.48  40.16    1,800     1,994  
seats            85  215.45   162.54   15.00    656.00  
maj              85   0.39     0.49      0         1    
pres             85   0.39     0.49      0         1    
lyp              85   8.41     0.97     6.27     9.94   
semi             85   0.11     0.31      0         1    
majpar           85   0.25     0.42     0.00     1.00   
majpres          85   0.13     0.33     0.00     1.00   
propres          85   0.26     0.44     0.00     1.00   
dem_age          85 1,958.34  43.74    1,800     1,994  
lat01            78   0.32     0.19    0.003     0.71   
age              85   0.21     0.22     0.03     1.00   
polityIV         80   7.17     3.64    -6.00     10.00  
spl              74  -2.18     3.48    -11.36    12.59  
cpi9500          71   4.81     2.38     0.27     8.25   
du_60ctry        85   0.71     0.46      0         1    
magn             84   0.47     0.40     0.01     1.00   
sdm              77   0.35     0.39     0.01     1.00   
oecd.x           85   0.27     0.45      0         1    
mining_gdp       77   4.26     6.72     0.02     37.20  
gini_8090        72  39.20    10.41    19.49     62.30  
con2150          85   0.11     0.31      0         1    
con5180          85   0.29     0.46      0         1    
con81            85   0.49     0.50      0         1    
list             84  114.48   129.55    0.00    510.33  
maj_bad          85   1.06     1.60     0.00     4.89   
maj_gin          72  16.40    20.96     0.00     62.00  
maj_old          85   0.08     0.19     0.00     1.00   
pres_bad         85   1.21     1.69     0.00     4.89   
pres_gin         72  16.66    22.90     0.00     62.00  
pres_old         85   0.06     0.16     0.00     1.00   
propar           85   0.35     0.48      0         1    
lpop             60  15.90     1.92    11.61     20.63  
continent_other  85   0.45     0.50      0         1    
continent_africa 85   0.13     0.34      0         1    
continent_asiae  85   0.15     0.36      0         1    
continent_laam   85   0.27     0.45      0         1    
--------------------------------------------------------</code></pre>
</div>
</div>
<p>Or as an html file, as in this case</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exports an html summary stats table with stargazer</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(<span class="fu">as.data.frame</span>(pt_copy), <span class="at">type =</span> <span class="st">"html"</span>, <span class="at">title =</span> <span class="st">"Descriptive Statistics"</span>, <span class="at">digits =</span> <span class="dv">2</span>, <span class="at">out =</span> <span class="st">"outputs/summary_stats.html"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exporting-regression-tables" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="exporting-regression-tables"><span class="header-section-number">6.3</span> Exporting Regression Tables</h2>
<p>Though there are other options, the best convenient way to export regression tables is with the <em>stargazer</em> package. To do so, we’ll first specify a list containing the regressions we want to export, and assign them to a new object named <code>regression_list</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># makes list container for regressions we want to export</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>regression_list<span class="ot">&lt;-</span><span class="fu">list</span>(regression1, regression2, regression3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then, we can pass the list as an argument to the <code>stargazer()</code> function, which will either export it to the specified directory as an html file, as in this case:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exports regressions in "regression_list" via stargazer as html</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(regression_list, <span class="at">type=</span><span class="st">"html"</span>, <span class="at">out=</span><span class="st">"outputs/cgexp_regressions.html"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Or as a text file, as in this case:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exports regressions in "regression_list" via stargazer as text file</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(regression_list, <span class="at">type=</span><span class="st">"text"</span>, <span class="at">out=</span><span class="st">"outputs/cgexp_regressions.txt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="iteratively-exporting-multiple-data-frames" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="iteratively-exporting-multiple-data-frames"><span class="header-section-number">6.4</span> Iteratively Exporting Multiple Data Frames</h2>
<p>In order to export multiple data frames (for example, we may want to export a bunch of cleaned data frames out of R to use in another package) we can use the <code>walk()</code> function and its relatives; these functions are a part of the <em>purrr</em> package, and work similarly to the <code>map()</code> family of functions.</p>
<p>Let’s say we want to export the cleaned World Bank data frames in <code>world_bank_list_cleaned</code>. First, we’ll create a vector of file names for the exported files using the <code>paste()</code> function. We’ll assign this vector to a new object named <code>WB_filenames_export</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create file names for exported World Bank files</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>WB_filenames_export<span class="ot">&lt;-</span><span class="fu">paste0</span>(<span class="st">"outputs/"</span>, worldbank_filenames_base, <span class="st">"_cleaned.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s see what this looks like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prints "WB_filenames_export" contents</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>WB_filenames_export</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "outputs/wdi_debt2019_cleaned.csv"  "outputs/wdi_fdi2019_cleaned.csv"  
[3] "outputs/wdi_trade2019_cleaned.csv" "outputs/wdi_urban2019_cleaned.csv"</code></pre>
</div>
</div>
<p>Now, we’ll use the <code>walk2()</code> function to iteratively pass the data frames (contained in <code>world_bank_list_cleaned</code> and the file names contained in <code>WB_filenames_export</code> to the <code>write_csv()</code> function. The code below takes the first elements from <code>world_bank_list_cleaned</code> and <code>WB_filenames_export</code>, and passes them to <code>write_csv()</code> which exports the first data frame with the first file name; then, it takes the second elements from <code>world_bank_list_cleaned</code> and <code>WB_filenames_export</code>, and passes them to <code>write_csv()</code> which exports the second data frame with the second file name; and so on.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exports datasets in "world_bank_list_cleaned" to "outputs" directory using filenames in "WB_filenames_export"</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="fu">walk2</span>(<span class="at">.x=</span>world_bank_list_cleaned, <span class="at">.y=</span>WB_filenames_export, write_csv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Check your “outputs” directory to ensure that the files have been written out as expected.</p>
</section>
<section id="exporting-visualizations" class="level2" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="exporting-visualizations"><span class="header-section-number">6.5</span> Exporting Visualizations</h2>
<p>We can use the <code>ggsave()</code> function to export <em>ggplot2</em> visualizations out of R in a variety of file formats. For example, let’s say we want to export <code>cgexp_africa_ascending_inverted</code> as a .png file:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exports "cgexp_africa_ascending_inverted" as .png file using "ggsave" function</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"outputs/africa_bar_chart.png"</span>, cgexp_africa_ascending_inverted, <span class="at">width=</span><span class="dv">10</span>, <span class="at">height=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The first argument contains the path, name, and desired file extension of the output file, while the second argument is the name of the object we want to write out. The “width” and “height” parameters set the dimensions of the output, and its useful to play around with these.</p>
<p>Now, let’s say that instead we want to export the file as a pdf; we can simply change the file extension:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exports "cgexp_africa_ascending_inverted" as .pdf file using "ggsave" function</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"outputs/africa_bar_chart.pdf"</span>, cgexp_africa_ascending_inverted, <span class="at">width=</span><span class="dv">10</span>, <span class="at">height=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you have several visualizations that you want to save in a single file, you can use a graphics device. Below, we use a PDF graphics device to create a single PDF file (named “workshop_visualizations.pdf”) that contains the <code>cgexp_africa_ascending_inverted</code> and the <code>scatter_cgexp_trade_line</code> visualizations. We begin by calling the graphics device, and specifying the name and path of the desired output file, along with the dimensions. Then, we print the name of the visualizations to export, followed by <code>dev.off()</code> to turn off the device after the file has been exported.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exports multiple files using pdf graphics device</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf</span>(<span class="st">"outputs/workshop_visualizations.pdf"</span>, <span class="at">width=</span><span class="dv">12</span>, <span class="at">height=</span><span class="dv">5</span>)</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>cgexp_africa_ascending_inverted</span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>scatter_cgexp_trade_line</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>quartz_off_screen 
                2 </code></pre>
</div>
</div>
<p>Check your directory to ensure that the “workshop_visualizations.pdf” file has been successfully exported, and contains both of the specified visualizations. There are graphics devices for other file types (such as png and jpeg) that work more or less analogously to the PDF graphics device.</p>
</section>
</section>
<section id="exercises" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Exercises</h1>
<p><em>Exercise 1</em></p>
<p>Create a visualization using <em>ggplot2</em> using either the Persson-Tabellini dataset, one of the World Bank datasets, or a dataset of your choice and export it out of R as a PDF file.</p>
<p><em>Exercise 2</em></p>
<p>Write a function to perform some action(s) on one of the World Bank datasets, then iteratively apply that function to all of the World Bank datasets. Write out the transformed files to a local directory on your computer.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>